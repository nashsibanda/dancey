(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(28),s=n.n(o),i=n(44),c=n.n(i),l=n(10),u=n.n(l),m=function(e){e?u.a.defaults.headers.common.Authorization=e:delete u.a.defaults.headers.common.Authorization},d=n(22),p=n(69),h=n(71),g=n(72),b=n.n(g),f=n(3),E=function(e){return{type:"RECEIVE_CURRENT_USER",currentUser:e}},v=function(e){return{type:"RECEIVE_SESSION_ERRORS",errors:e}},O=function(){return function(e){localStorage.removeItem("jwtToken"),m(!1),e({type:"RECEIVE_USER_LOGOUT"})}},k=function(e){return function(t){var n;t(Object(f.x)()),(n=e,u.a.post("/api/users/register",n)).then((function(e){var n=e.data.token;localStorage.setItem("jwtToken",n),m(n);var a=c()(n);t(E(a)),t({type:"HIDE_SESSION_FORM_MODAL"}),t(Object(f.w)()),y(a,t)}),(function(e){t(v(e.response.data)),t(Object(f.w)())}))}},N=function(e){return function(t){var n;t(Object(f.x)()),(n=e,u.a.post("/api/users/login",n)).then((function(e){var n=e.data.token;localStorage.setItem("jwtToken",n),m(n);var a=c()(n);t(E(a)),t({type:"HIDE_SESSION_FORM_MODAL"}),t(Object(f.w)()),y(a,t)})).catch((function(e){t(v(e.response.data)),t(Object(f.w)())}))}},y=function(e,t){setTimeout((function(){t(O()),t(v({name:"SessionTimeout",message:"Your session has timed out. Please log in again."}))}),1e3*(e.exp-e.iat))},S=function(e){if("string"===typeof e)return[{name:"StandardError",message:e}];var t=[];return e.message.split(".").forEach((function(n){var a={name:e.name,message:n.trim()};t.push(a)})),t},I=[],C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_SESSION_ERRORS":return S(t.errors);case"RECEIVE_CURRENT_USER":return I;default:return e}},j=n(15),F=[],w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case j.d:return S(t.errors);case j.a:case j.b:return F;default:return e}},R=function(e){return{type:"RECEIVE_ONE_TRACK",track:e}},P=function(e){return{type:"RECEIVE_TRACK_ERRORS",errors:e}},T=function(e,t){return function(n){n(Object(f.B)()),function(e,t){return u.a.get("/api/tracks/get/".concat(e,"/").concat(t))}(e,t).then((function(e){n(function(e){return{type:"RECEIVE_TRACKS",tracks:e}}(e.data)),n(Object(f.A)())})).catch((function(e){n(P(e.response.data)),n(Object(f.A)())}))}},A=function(e,t){return function(n){var a,r;(a=e,r=t,u.a.put("/api/tracks/".concat(r),a)).then((function(e){return n(R(e.data))})).catch((function(e){return n(P(e.response.data))}))}},L=function(e,t){return function(n){(function(e,t){return u.a.post("api/tracks/post/release/".concat(t),e)})(e,t).then((function(e){var t;n({type:"RECEIVE_TRACK_AND_RELEASE",updatedRelease:(t=e.data).updatedRelease,track:t.track})})).catch((function(e){n(P(e.response.data))}))}},M=[],D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_TRACK_ERRORS":return S(t.errors);case"RECEIVE_ONE_TRACK":case"RECEIVE_TRACKS":return M;default:return e}},_=n(19),B=[],U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case _.c:return S(t.errors);case _.b:case _.a:return B;default:return e}},x=function(e){return{type:"RECEIVE_ONE_COMMENT",comment:e}},V=function(e){return{type:"RECEIVE_COMMENT_ERRORS",errors:e}},G=function(e,t){return function(n){n(Object(f.p)()),function(e,t){return u.a.get("api/comments/get/".concat(e,"/").concat(t))}(e,t).then((function(e){n(function(e){return{type:"RECEIVE_COMMENTS",comments:e}}(e.data)),n(Object(f.o)())})).catch((function(e){n(V(e.response.data)),n(Object(f.o)())}))}},K=function(e){return function(t){var n;(n=e,u.a.post("/api/comments",n)).then((function(e){return t(x(e.data))})).catch((function(e){return t(V(e.response.data))}))}},Y=function(e){return function(t){(function(e){return u.a.put("/api/comments/".concat(e,"/like"))})(e).then((function(e){return t(x(e.data))})).catch((function(e){return t(V(e.response.data))}))}},W=function(e){return function(t){(function(e){return u.a.delete("api/comments/".concat(e))})(e).then((function(e){return t(x(e.data))})).catch((function(e){return t(V(e.response.data))}))}},H=function(e,t){return function(n){(function(e,t){return u.a.put("/api/comments/".concat(e),t)})(e,t).then((function(e){return n(x(e.data))})).catch((function(e){return n(V(e.response.data))}))}},J=[],Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_COMMENT_ERRORS":return S(t.errors);case"RECEIVE_ONE_COMMENT":case"RECEIVE_COMMENTS":return J;default:return e}},Q=Object(d.combineReducers)({session:C,releases:w,tracks:D,personnel:U,comments:Z}),z=n(31),X={isAuthenticated:!1,user:{}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_USER_LOGOUT":return{isAuthenticated:!1,user:void 0};case"RECEIVE_CURRENT_USER":return Object(z.a)(Object(z.a)({},e),{},{isAuthenticated:!!t.currentUser,user:t.currentUser});case"RECEIVE_USER_LOGIN":return Object(z.a)(Object(z.a)({},e),{},{loggedIn:!0});default:return e}},$=n(12),ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case j.b:var n={};return t.releases.forEach((function(e){n[e._id]=e})),n;case j.a:var a=t.release;return Object.assign({},e,Object($.a)({},a._id,a));case"RECEIVE_TRACK_AND_RELEASE":var r=t.updatedRelease;return Object.assign({},e,Object($.a)({},r._id,r));default:return e}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case _.b:var n={};return t.personnel.forEach((function(e){n[e._id]=e})),Object.assign({},e,n);case _.a:var a=t.personnel;return Object.assign({},e,Object($.a)({},a._id,a));default:return e}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_TRACKS":var n={};return t.tracks.forEach((function(e){n[e._id]=e})),Object.assign({},e,n);case"RECEIVE_TRACK_AND_RELEASE":var a=t.track;return Object.assign({},e,Object($.a)({},a._id,a));default:return e}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"RECEIVE_COMMENTS":var n={};return t.comments.forEach((function(e){n[e._id]=e})),Object.assign({},e,n);case"RECEIVE_ONE_COMMENT":var a=t.comment;return Object.assign({},e,Object($.a)({},a._id,a));case"REMOVE_ONE_COMMENT":var r=Object.assign({},e);return delete r[t.comment._id],r;default:return e}},re=n(30),oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case re.RECEIVE_REVIEWS:var n={};return t.reviews.forEach((function(e){n[e._id]=e})),Object.assign({},e,n);case re.RECEIVE_ONE_REVIEW:var a=t.review;return Object.assign({},e,Object($.a)({},a._id,a));case re.CLEAR_ONE_REVIEW:var r=Object.assign({},e);return delete r[t.review._id],r;default:return e}},se=Object(d.combineReducers)({releases:ee,personnel:te,tracks:ne,comments:ae,reviews:oe}),ie=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case f.f:return!0;case f.e:return!1;default:return e}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case f.h:return!0;case f.g:return!1;default:return e}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case f.b:return!0;case f.a:return!1;default:return e}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case f.l:return!0;case f.k:return!1;default:return e}},me=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case f.d:return!0;case f.c:return!1;default:return e}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case f.n:return!0;case f.m:return!1;default:return e}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case f.j:return!0;case f.i:return!1;default:return e}},he=Object(d.combineReducers)({releases:ie,reviews:ce,comments:le,tracks:ue,personnel:me,trackPersonnel:de,session:pe}),ge={showSessionFormModal:!1,releasesIndexCount:0,personnelIndexCount:0},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case"SHOW_SESSION_FORM_MODAL":return Object.assign({},e,{showSessionFormModal:!0});case"HIDE_SESSION_FORM_MODAL":return Object.assign({},e,{showSessionFormModal:!1});case"TOGGLE_SESSION_FORM_MODAL":return Object.assign({},e,{showSessionFormModal:!e.showSessionFormModal});case j.c:return Object.assign({},e,{releasesIndexCount:t.count});default:return e}},fe=Object(d.combineReducers)({errors:Q,session:q,entities:se,loading:he,ui:be}),Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(d.createStore)(fe,e,Object(p.composeWithDevTools)(Object(d.applyMiddleware)(h.a,b.a)))},ve=n(9),Oe=n(18),ke=n(76),Ne=n(20),ye=n(77),Se=function(e){return{loggedIn:e.session.isAuthenticated}},Ie=Object(Ne.g)(Object(ve.connect)(Se)((function(e){var t=e.component,n=e.path,a=e.loggedIn,o=e.exact;return r.a.createElement(Ne.b,{path:n,exact:o,render:function(e){return a?r.a.createElement(Ne.a,{to:"/releases"}):r.a.createElement(t,e)}})}))),Ce=(Object(Ne.g)(Object(ve.connect)(Se)((function(e){var t=e.component,n=e.loggedIn,a=Object(ye.a)(e,["component","loggedIn"]);return r.a.createElement(Ne.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(Ne.a,{to:"/login"})}}))}))),n(5)),je=n(8),Fe=n(7),we=n(6),Re=n(2);function Pe(e){return r.a.createElement("div",{className:"loading-spinner"+(e.className?" ".concat(e.className):"")},r.a.createElement(Re.a,{icon:"compact-disc",spin:!0,rotation:[90,180,270][Math.floor(3*Math.random())]}))}var Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"personnel",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"name",s=Le();return e.length>0?r.a.createElement(a.Fragment,{key:"".concat(s,"-main")},e.slice(0,-1).map((function(e){return r.a.createElement(a.Fragment,{key:"".concat(s,"-").concat(e._id)},r.a.createElement(Oe.b,{to:"/".concat(n,"/").concat(e._id),target:t?"_blank":"_self",rel:"noopener noreferrer"},e[o]),", ")})),r.a.createElement(Oe.b,{to:"/".concat(n,"/").concat(e[e.length-1]._id),target:t?"_blank":"_self",rel:"noopener noreferrer"},e[e.length-1][o])):r.a.createElement(a.Fragment,{key:s})},Ae=function(e){return"".concat(parseInt(e/60),":").concat(e%60>9?e%60:"0"+e%60)},Le=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()},Me=n(32),De=n.n(Me),_e=function(e){var t=e.release,n=t.title,a=t._id,o=t.format,s=t.releaseYear,i=t.mainArtists,c=t.releaseCountry,l=t.images.find((function(e){return!0===e.mainImage}));return r.a.createElement("li",{className:"release-tile"},r.a.createElement(Oe.b,{to:"/releases/".concat(a)},r.a.createElement("img",{src:l?l.imageUrl:De.a,alt:l?l.description:"Default album placeholder image - upload a new one!"})),r.a.createElement("div",{className:"release-tile-info"},r.a.createElement("div",{className:"release-tile-title"},r.a.createElement(Oe.b,{to:"/releases/".concat(a)},n)),r.a.createElement("div",{className:"release-tile-artist"},i[0]&&Te(i)),r.a.createElement("div",{className:"release-tile-details"},r.a.createElement("div",{className:"release-tile-details-format-year"},r.a.createElement("span",null,s),r.a.createElement("span",null,o)),r.a.createElement("div",{className:"release-tile-details-country"},r.a.createElement("span",null,c)))))},Be=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={initialLoad:!1},a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fetchReleases)(!0,10),this.setState({initialLoad:!0})}},{key:"render",value:function(){var e=this.props,t=e.releases,n=e.loading,a=this.state.initialLoad;return r.a.createElement("div",{className:"discover releases-index-container"},r.a.createElement("div",{className:"resource-show-section-header"},r.a.createElement("h2",null,"Discover Releases")),r.a.createElement("div",{className:"discover releases-index-items"},!a||n?r.a.createElement(Pe,null):r.a.createElement("ul",{className:"releases-tiles-index"},Object.values(t).map((function(e){return r.a.createElement(_e,{key:e._id,release:e})})))))}}]),n}(r.a.Component),Ue=Object(ve.connect)((function(e){return{releases:e.entities.releases,loading:e.loading.releases}}),(function(e){return{fetchReleases:function(t,n){return e(Object(j.i)(t,n))}}}))(Be),xe=function(e){return r.a.createElement("section",{className:"hero-section"},r.a.createElement("h1",null,"dancey"),e.loggedIn?e.user&&r.a.createElement("div",{className:"user-info"},"Welcome back, ",e.user.username):r.a.createElement("ul",{className:"session-menu"},r.a.createElement("li",null,r.a.createElement("button",{className:"big-button register",onClick:e.openSessionForm("register")},r.a.createElement(Re.a,{icon:"user-plus"}),r.a.createElement("span",null,"Register"))),r.a.createElement("li",null,r.a.createElement("button",{className:"big-button login",onClick:e.openSessionForm("login")},r.a.createElement(Re.a,{icon:"sign-in-alt"}),r.a.createElement("span",null,"Log In")))))},Ve=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe,{openSessionForm:this.props.openSessionForm,logoutUser:this.props.logoutUser,loggedIn:this.props.loggedIn,user:this.props.user}),r.a.createElement(Ue,null))}}]),n}(r.a.Component),Ge=n(1),Ke=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={email:"",password:""},a.handleSubmit=a.handleSubmit.bind(Object(Ge.a)(a)),a.update=a.update.bind(Object(Ge.a)(a)),a.renderErrors=a.renderErrors.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidUpdate",value:function(e,t){!0===this.props.currentUser&&this.props.history.push("/releases")}},{key:"update",value:function(e){var t=this;return function(n){return t.setState(Object($.a)({},e,n.currentTarget.value))}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={email:this.state.email,password:this.state.password};this.props.login(t)}},{key:"renderErrors",value:function(){return r.a.createElement("ul",null,this.props.errors.map((function(e,t){return r.a.createElement("li",{key:"error-".concat(t),className:e.name},e.message)})))}},{key:"render",value:function(){var e=this.props,t=e.warning,n=e.loading,a=this.state,o=a.email,s=a.password;return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"session-form"},t&&r.a.createElement("h2",{className:"login-form-warning"},"You must be logged in to do this."),r.a.createElement("input",{type:"email",value:o,onChange:this.update("email"),placeholder:"Email",required:!0}),r.a.createElement("input",{type:"password",value:s,onChange:this.update("password"),placeholder:"Password",required:!0}),n?r.a.createElement(Pe,null):r.a.createElement("button",{className:"big-button",type:"submit"},"Log In"),this.renderErrors())}}]),n}(r.a.Component),Ye=Object(Ne.g)(Ke),We=Object(ve.connect)((function(e){return{loggedIn:e.session.isAuthenticated,errors:e.errors.session,loading:e.loading.session}}),(function(e){return{login:function(t){return e(N(t))}}}))(Ye),He=n(37),Je=n.n(He),Ze=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={email:"",username:"",password:"",confPassword:"",firstName:"",lastName:"",location:""},a.update=a.update.bind(Object(Ge.a)(a)),a.renderErrors=a.renderErrors.bind(Object(Ge.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidUpdate",value:function(e,t){!0===this.props.loggedIn&&this.props.history.push("/releases")}},{key:"update",value:function(e){var t=this;return function(n){return t.setState(Object($.a)({},e,n.currentTarget.value))}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.username,a={email:t.email,username:n,firstName:t.firstName,lastName:t.lastName,location:t.location,password:t.password,confPassword:t.confPassword};this.props.register(a,this.props.history)}},{key:"renderErrors",value:function(){return r.a.createElement("ul",null,this.props.errors.map((function(e,t){return r.a.createElement("li",{key:"error-".concat(t),className:e.name},e.message)})))}},{key:"render",value:function(){var e=this.props.loading,t=this.state,n=t.username,a=t.email,o=t.firstName,s=t.lastName,i=t.location,c=t.password,l=t.confPassword;return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"session-form"},r.a.createElement("input",{type:"email",value:a,onChange:this.update("email"),placeholder:"Email",required:!0}),r.a.createElement("input",{type:"text",value:n,onChange:this.update("username"),placeholder:"Username",required:!0}),r.a.createElement("input",{type:"password",value:c,onChange:this.update("password"),placeholder:"Password",required:!0}),r.a.createElement("input",{type:"password",value:l,onChange:this.update("confPassword"),placeholder:"Confirm Password",required:!0}),r.a.createElement("input",{type:"text",value:o,onChange:this.update("firstName"),placeholder:"First Name",required:!0}),r.a.createElement("input",{type:"text",value:s,onChange:this.update("lastName"),placeholder:"Last Name",required:!0}),r.a.createElement("select",{onChange:this.update("location"),value:i,placeholder:"Country"},r.a.createElement("option",{disabled:!0,value:""},"Country of Residence"),Object.keys(Je.a).map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),e?r.a.createElement(Pe,null):r.a.createElement("button",{className:"big-button",type:"submit"},"Register New Account"),this.renderErrors())}}]),n}(r.a.Component),Qe=Object(Ne.g)(Ze),ze=Object(ve.connect)((function(e){return{loggedIn:e.session.isAuthenticated,errors:e.errors.session,loading:e.loading.session}}),(function(e){return{register:function(t){return e(k(t))}}}))(Qe),Xe=n(38),qe=function(e){var t=e.release,n=t.title,a=t._id,o=t.format,s=t.releaseYear,i=t.mainArtists,c=t.releaseCountry,l=t.images.find((function(e){return!0===e.mainImage}));return r.a.createElement("li",{className:"release-list-item"},r.a.createElement(Oe.b,{to:"/releases/".concat(a)},r.a.createElement("img",{src:l?l.imageUrl:De.a,alt:l?l.description:"Default album placeholder image - upload a new one!"})),r.a.createElement("div",{className:"release-list-item-info"},r.a.createElement("div",{className:"release-list-item-title"},r.a.createElement(Oe.b,{to:"/releases/".concat(a)},n)),r.a.createElement("div",{className:"release-list-item-details"},r.a.createElement("div",{className:"release-list-item-artist"},i[0]&&Te(i)),r.a.createElement("div",{className:"release-list-item-other-details"},r.a.createElement("div",{className:"release-list-item-details-format-year"},r.a.createElement("span",null,s),r.a.createElement("span",null,o)),r.a.createElement("div",{className:"release-list-item-details-country"},r.a.createElement("span",null,c))))))},$e=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={initialLoad:!1,itemsPerPage:a.props.defaultItemsPerPage,pageNum:1,tileView:!0},a.changePageNumber=a.changePageNumber.bind(Object(Ge.a)(a)),a.changePageSize=a.changePageSize.bind(Object(Ge.a)(a)),a.changeIndexViewFormat=a.changeIndexViewFormat.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.resourceType,n=e.resourceId,a=e.fetchReleases,r=e.getReleasesCount,o=this.state;a(o.pageNum,o.itemsPerPage,t,n),r(t,n),this.setState({initialLoad:!0})}},{key:"componentDidUpdate",value:function(e,t){var n=this;t.pageNum!==this.state.pageNum&&this.props.fetchReleases(this.state.pageNum,this.state.itemsPerPage,this.props.resourceType,this.props.resourceId),t.itemsPerPage!==this.state.itemsPerPage&&this.setState({pageNum:1},(function(){n.props.fetchReleases(n.state.pageNum,n.state.itemsPerPage,n.props.resourceType,n.props.resourceId)}))}},{key:"changeIndexViewFormat",value:function(e){var t=this;return function(n){return t.setState({tileView:e})}}},{key:"changePageNumber",value:function(e){var t=this;return function(n){return t.setState({pageNum:parseInt(e)})}}},{key:"changePageSize",value:function(e){this.setState({itemsPerPage:parseInt(e.target.value)})}},{key:"render",value:function(){for(var e=this,t=this.props,n=t.mainCatalogue,a=t.releases,o=t.indexTitle,s=t.loading,i=t.releasesIndexCount,c=this.state,l=c.initialLoad,u=c.itemsPerPage,m=c.pageNum,d=c.tileView,p=Math.ceil(i/u),h=[],g=0;g<p;g++)h.push(g+1);return r.a.createElement("div",{className:"releases-index-container"},!n&&r.a.createElement("div",{className:"resource-show-section-header"},r.a.createElement("h2",null,o)),n&&r.a.createElement(Xe.a,null,r.a.createElement("title",null,"Releases \u2014 dancey")),r.a.createElement("div",{className:"releases-index-view-options"},s&&r.a.createElement("div",null,r.a.createElement(Pe,null)),r.a.createElement("span",{className:"index-view-format-menu"},r.a.createElement("button",{className:"icon-button ".concat(d?"selected":""),onClick:this.changeIndexViewFormat(!0),title:"Tile view"},r.a.createElement(Re.a,{icon:"th"})),r.a.createElement("button",{className:"icon-button ".concat(d?"":"selected"),onClick:this.changeIndexViewFormat(!1),title:"List view"},r.a.createElement(Re.a,{icon:"th-list"}))),r.a.createElement("span",{className:"index-page-size-select"},r.a.createElement("label",null,"Items Per Page",r.a.createElement("select",{onChange:this.changePageSize,value:u},r.a.createElement("option",{value:12},"12"),r.a.createElement("option",{value:24},"24"),r.a.createElement("option",{value:60},"60"),r.a.createElement("option",{value:96},"96"),r.a.createElement("option",{value:120},"120"),r.a.createElement("option",{value:240},"240")))),r.a.createElement("span",{className:"index-page-navigation"},r.a.createElement("button",{className:"link-button",disabled:1===m,onClick:this.changePageNumber(1),title:"Go to First Page"},"First"),r.a.createElement("button",{className:"link-button",disabled:1===m,onClick:this.changePageNumber(m-1),title:"Go to Previous Page"},"Prev"),r.a.createElement("ul",{className:"page-navigation-numbers"},r.a.createElement("button",{className:"link-button ".concat(1===m?"selected":""),onClick:this.changePageNumber(1),title:"Go to Page 1"},"1"),1!==m&&m-1>2&&r.a.createElement("span",null,"..."),h.map((function(t){return(t===m||t-m===1||m-t===1)&&1!==t&&t!==p&&r.a.createElement("li",{key:"page-num-".concat(t)},r.a.createElement("button",{className:"link-button ".concat(t===m?"selected":""),onClick:e.changePageNumber(t),title:"Go to Page ".concat(t)},t))})),m!==p&&m+1!==p&&m+2!==p&&r.a.createElement("span",null,"..."),p>1&&r.a.createElement("button",{className:"link-button ".concat(m===p?"selected":""),onClick:this.changePageNumber(p),title:"Go to Page ".concat(p)},p)),r.a.createElement("button",{className:"link-button",disabled:m===p,onClick:this.changePageNumber(m+1),title:"Go to Next Page"},"Next"),r.a.createElement("button",{className:"link-button",disabled:m===p,onClick:this.changePageNumber(p),title:"Go to Last Page"},"Last"))),r.a.createElement("div",{className:"releases-index-items"},l?d?r.a.createElement("ul",{className:"releases-tiles-index"},Object.values(a).map((function(e){return r.a.createElement(_e,{key:e._id,release:e})}))):r.a.createElement("ul",{className:"releases-list-index"},Object.values(a).map((function(e){return r.a.createElement(qe,{key:e._id,release:e})}))):r.a.createElement(Pe,null)),r.a.createElement("div",{className:"releases-index-view-options"},s&&r.a.createElement("div",null,r.a.createElement(Pe,null)),r.a.createElement("span",{className:"index-view-format-menu"},r.a.createElement("button",{className:"icon-button ".concat(d?"selected":""),onClick:this.changeIndexViewFormat(!0)},r.a.createElement(Re.a,{icon:"th"})),r.a.createElement("button",{className:"icon-button ".concat(d?"":"selected"),onClick:this.changeIndexViewFormat(!1)},r.a.createElement(Re.a,{icon:"th-list"}))),r.a.createElement("span",{className:"index-page-size-select"},r.a.createElement("label",null,"Items Per Page",r.a.createElement("select",{onChange:this.changePageSize,value:u},r.a.createElement("option",{value:12},"12"),r.a.createElement("option",{value:24},"24"),r.a.createElement("option",{value:60},"60"),r.a.createElement("option",{value:96},"96"),r.a.createElement("option",{value:120},"120"),r.a.createElement("option",{value:240},"240")))),r.a.createElement("span",{className:"index-page-navigation"},r.a.createElement("button",{className:"link-button",disabled:1===m,onClick:this.changePageNumber(1)},"First"),r.a.createElement("button",{className:"link-button",disabled:1===m,onClick:this.changePageNumber(m-1)},"Prev"),r.a.createElement("ul",{className:"page-navigation-numbers"},r.a.createElement("button",{className:"link-button ".concat(1===m?"selected":""),onClick:this.changePageNumber(1)},"1"),1!==m&&m-1>2&&r.a.createElement("span",null,"..."),h.map((function(t){return(t===m||t-m===1||m-t===1)&&1!==t&&t!==p&&r.a.createElement("li",{key:"page-num-".concat(t)},r.a.createElement("button",{className:"link-button ".concat(t===m?"selected":""),onClick:e.changePageNumber(t)},t))})),m!==p&&m+1!==p&&m+2!==p&&r.a.createElement("span",null,"..."),p>1&&r.a.createElement("button",{className:"link-button ".concat(m===p?"selected":""),onClick:this.changePageNumber(p)},p)),r.a.createElement("button",{className:"link-button",disabled:m===p,onClick:this.changePageNumber(m+1)},"Next"),r.a.createElement("button",{className:"link-button",disabled:m===p,onClick:this.changePageNumber(p)},"Last"))))}}]),n}(r.a.Component),et=Object(ve.connect)((function(e){return{releases:e.entities.releases,loading:e.loading.releases,mainCatalogue:!0,releasesIndexCount:e.ui.releasesIndexCount,defaultItemsPerPage:60}}),(function(e){return{fetchReleases:function(t,n){return e(Object(j.g)(t,n))},getReleasesCount:function(){return e(Object(j.e)())}}}))($e),tt=n(42),nt=n(34),at=n(78),rt=n(51),ot=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).updateSelected=function(e){var t=a.props,n=t.formUpdate,r=t.fieldName;a.setState({selected:e},(function(){return n(r,a.state.selected)}))},a.state={selected:[],inputValue:"",redirect:!1},a.fetchData=a.fetchData.bind(Object(Ge.a)(a)),a.updateInputValue=a.updateInputValue.bind(Object(Ge.a)(a)),a.makeOptions=a.makeOptions.bind(Object(Ge.a)(a)),a.updateSelected=a.updateSelected.bind(Object(Ge.a)(a)),a.setDefaultOptions=a.setDefaultOptions.bind(Object(Ge.a)(a)),a.handleCreate=a.handleCreate.bind(Object(Ge.a)(a)),a.linkToResource=a.linkToResource.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(this.props.defaultSelected){var t=this.props,n=t.formUpdate,a=t.fieldName,r=t.defaultSelected;this.setState({selected:this.makeOptions(r)},(function(){return n(a,e.state.selected)}))}}},{key:"updateInputValue",value:function(e){var t=e.replace(/[^\w\d\-_ \u3000\u3040-\u309F\u30A0-\u30FF\uFF00-\uFFEF\u4E00-\u9FAF]/g,"");return this.setState({inputValue:t}),t}},{key:"makeOptions",value:function(e){var t=this;return e.map((function(e){var n=t.props.getOptionFields(e);return{value:e._id,label:n.labelField,moreInfoField1:n.moreInfoField1,moreInfoField2:n.moreInfoField2,image:n.image,resourceType:n.resourceType}}))}},{key:"fetchData",value:function(e){var t=this,n=this.props,a=n.receiveResponseErrors,r=n.getQueryData;return e.length<2?this.setDefaultOptions():r(this.props.recordType,e).then((function(e){return t.makeOptions(e.data)})).catch((function(e){return a(e.response.data)}))}},{key:"handleCreate",value:function(e){var t=this;this.setState({isLoading:!0}),this.props.createNewEntry(e).then((function(e){var n=t.makeOptions([e.data]);t.setState({isLoading:!1});var a=t.state.selected.concat(n);t.updateSelected(a)}))}},{key:"setDefaultOptions",value:function(){return this.makeOptions(Object.values(this.props.statePersonnel))}},{key:"linkToResource",value:function(e){var t=this,n=this.props.formUpdate;this.setState({selected:e},(function(){n(null,t.state.selected),t.setState({selected:[]})}))}},{key:"render",value:function(){return this.props.noCreate?r.a.createElement(rt.a,{cacheOptions:!0,className:"search-autocomplete",classNamePrefix:"search-autocomplete",loadOptions:this.fetchData,placeholder:this.props.placeholderText,onInputChange:this.updateInputValue,formatOptionLabel:this.props.formatOptionLabel,onCreateOption:this.handleCreate,onChange:this.props.optionLinks?this.linkToResource:this.updateSelected,value:this.state.selected}):r.a.createElement(r.a.Fragment,null,r.a.createElement(at.a,{isMulti:this.props.multiSelect,cacheOptions:!0,className:"search-autocomplete",classNamePrefix:"search-autocomplete",loadOptions:this.fetchData,placeholder:this.props.placeholderText,onInputChange:this.updateInputValue,formatOptionLabel:this.props.formatOptionLabel,onCreateOption:this.handleCreate,onChange:this.props.optionLinks?this.linkToResource:this.updateSelected,value:this.state.selected}))}}]),n}(a.Component),st=n(25),it=n.n(st),ct=n(52),lt=n.n(ct),ut=function(e){e.value;var t=e.label,n=e.moreInfoField1,a=e.moreInfoField2,o=e.image;return r.a.createElement("div",{className:"search-autocomplete-option"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:o,className:"main-image",alt:"".concat(t)})),r.a.createElement("div",{className:"label-and-details"},r.a.createElement("div",{className:"main-label"},r.a.createElement("span",null,t)),r.a.createElement("div",{className:"more-info"},r.a.createElement("span",null,n),r.a.createElement("span",null,a))))},mt=Object(ve.connect)((function(e){return{formatOptionLabel:ut,getOptionFields:function(e){return function(e){return{labelField:e.name?e.name:e.title,moreInfoField1:e.name?e.alsoKnownAs&&e.alsoKnownAs.length>0?"aka. ".concat(e.alsoKnownAs.slice(0,4).join(", ")):"":e.mainArtists.map((function(e){return e.name})).length>0?"by ".concat(e.mainArtists.map((function(e){return e.name})).slice(0,4).join(", ")):"",moreInfoField2:e.name?e.dateOfBirth?"b. ".concat(it()(e.dateOfBirth).format("YYYY")):"":e.releaseYear?"".concat(e.releaseYear?e.releaseYear:"").concat(e.releaseYear&&e.format?", ":"").concat(e.format?e.format:""):"",image:e.images.length>0?e.images.find((function(e){return e.mainImage}))?e.images.find((function(e){return e.mainImage})).imageUrl:e.images[0].imageUrl:e.name?lt.a:De.a,resourceType:e.name?"personnel":"releases"}}(e)},statePersonnel:e.entities.personnel}}),(function(e){return{getQueryData:function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return u.a.get("api/search?keyword=".concat(t,"&type=").concat(e))}(e,t)},receiveSelectedData:function(t){return e(Object(_.g)(t))},receiveResponseErrors:function(t){return e(Object(_.h)(t))},createNewEntry:function(e){return Object(nt.e)({name:e})}}}))(ot),dt=n(53),pt=n.n(dt),ht=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={role:"",personnelIds:null,personnelDisplay:null,showError:!1,randKey:Le()},a.updateRoleField=a.updateRoleField.bind(Object(Ge.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ge.a)(a)),a.showError=a.showError.bind(Object(Ge.a)(a)),a.updatePersonnelSelectField=a.updatePersonnelSelectField.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"updatePersonnelSelectField",value:function(e,t){var n,a,r;t?(a=t.map((function(e){return e.value})),r=t.map((function(e){return e.label}))):(a=null,r=null),this.setState((n={},Object($.a)(n,e,a),Object($.a)(n,"personnelDisplay",r),n))}},{key:"updateRoleField",value:function(e){e.preventDefault(),this.setState({role:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.role,a=t.personnelIds,r=t.personnelDisplay;n&&a?(this.props.addToPersonnel({role:n,personnelIds:a,personnelDisplay:r}),this.setState({role:"",personnelIds:null,personnelDisplay:null,showError:!1,randKey:Le()})):this.showError()}},{key:"showError",value:function(){var e=this;this.setState({showError:!0},(function(){setTimeout((function(){e.setState({showError:!1})}),5e3)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"personnel-role-form-select"},r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:this.props.labelCatNoForm?"Catalogue Number...":"Role...",onChange:this.updateRoleField,value:this.state.role}),r.a.createElement(mt,{formUpdate:this.updatePersonnelSelectField,recordType:"personnel",multiSelect:!0,fieldName:"personnelIds",placeholderText:this.props.labelCatNoForm?"Label...":"Search...",key:this.state.randKey}),r.a.createElement("button",{type:"button",className:"icon-button",onClick:this.handleSubmit},r.a.createElement(Re.a,{icon:"plus-square"}))),this.state.showError&&r.a.createElement("div",null,r.a.createElement("span",null,"Make sure you add a role and at least one personnel selection")))}}]),n}(a.Component),gt=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={personnel:{},displayPersonnel:{}},a.addToPersonnel=a.addToPersonnel.bind(Object(Ge.a)(a)),a.removeFromPersonnel=a.removeFromPersonnel.bind(Object(Ge.a)(a)),a.displayPersonnelLinks=a.displayPersonnelLinks.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){if(this.props.currentPersonnel){var e=this.props.currentPersonnel,t={},n={};e.forEach((function(e){var a=Le(),r=e.role,o=e.personnelIds,s=e.personnelDisplay,i=e._id;t[a]={role:r,personnelIds:o,_id:i},n[a]={role:r,personnelDisplay:s}})),this.setState({personnel:t,displayPersonnel:n})}}},{key:"componentDidUpdate",value:function(e,t){if(t.personnel!==this.state.personnel){var n=this.state.personnel,a=Object.values(n);this.props.formUpdate(a)}}},{key:"addToPersonnel",value:function(e){var t=Le(),n=e.role,a=e.personnelIds,r=e.personnelDisplay;this.setState({personnel:Object.assign({},this.state.personnel,Object($.a)({},t,{role:n,personnelIds:a})),displayPersonnel:Object.assign({},this.state.displayPersonnel,Object($.a)({},t,{role:n,personnelDisplay:r}))})}},{key:"removeFromPersonnel",value:function(e){var t=this;return function(n){var a=Object.assign({},t.state.personnel),r=Object.assign({},t.state.displayPersonnel);delete a[e],delete r[e],t.setState({personnel:a,displayPersonnel:r})}}},{key:"displayPersonnelLinks",value:function(e){var t=this.state,n=t.personnel,a=t.displayPersonnel[e].personnelDisplay.map((function(t,a){return{_id:n[e].personnelIds[a],name:t}}));return Te(a,!0)}},{key:"render",value:function(){var e=this,t=this.state,n=t.personnel,a=t.displayPersonnel,o=Object.keys(n);return r.a.createElement("div",{className:"personnel-role-form-section"},r.a.createElement(ht,{addToPersonnel:this.addToPersonnel,labelCatNoForm:this.props.labelCatNoForm}),r.a.createElement("ul",{className:"selected-personnel-list"},o.length>0&&o.map((function(t){return r.a.createElement("li",{key:t,className:"personnel-role-form-selected-personnel"},r.a.createElement("button",{type:"button",onClick:e.removeFromPersonnel(t),className:"link-button"},r.a.createElement(Re.a,{icon:"times"}),r.a.createElement("span",null,"Remove")),r.a.createElement("span",null,a[t].role),r.a.createElement("span",null,e.displayPersonnelLinks(t)))}))))}}]),n}(a.Component),bt=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={title:"",durationMins:"",durationSecs:"",mainArtists:null,personnel:null,writers:null,originalVersion:"",_id:a.props.track?a.props.track._id:null,showMainArtistsField:!0,showWritersField:!0,showPersonnelField:!0,sideOrDisc:"",order:"",numberOfSides:a.props.numberOfSides,sideLabels:[],letterSides:a.props.letterSides},a.updateField=a.updateField.bind(Object(Ge.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ge.a)(a)),a.updateSelectField=a.updateSelectField.bind(Object(Ge.a)(a)),a.showPersonnelField=a.showPersonnelField.bind(Object(Ge.a)(a)),a.addSide=a.addSide.bind(Object(Ge.a)(a)),a.getSideLabels=a.getSideLabels.bind(Object(Ge.a)(a)),a.updatePersonnelField=a.updatePersonnelField.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){if(this.props.track){var e=this.props.track,t=e.title,n=e.duration,a=e.personnel,r=e.originalVersion,o=e.mainArtists,s=e.writers,i=e._id;this.setState({title:t,personnel:a,originalVersion:r,mainArtists:o,writers:s,durationMins:parseInt(n/60),durationSecs:n%60,_id:i})}else if(this.props.releaseId){var c=this.props,l=c.stateReleases,u=c.releaseId;this.setState({mainArtists:l[u].mainArtists})}this.props.releaseFormat&&this.setState({sideLabels:this.getSideLabels()})}},{key:"getSideLabels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.numberOfSides;return this.props.letterSides?pt.a.slice(0,e):Object(tt.a)(Array(e).keys()).map((function(e){return e+1}))}},{key:"updateField",value:function(e){var t=this;return function(n){return t.setState(Object($.a)({},e,n.target.value))}}},{key:"updateSelectField",value:function(e,t){var n=t?t.map((function(e){return e.value})):null;this.setState(Object($.a)({},e,n))}},{key:"updatePersonnelField",value:function(e){this.setState({personnel:e.length>0?e:null})}},{key:"showPersonnelField",value:function(e){var t=this;return function(n){return t.setState(Object($.a)({},e,!t.state[e]))}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.title,a=t.durationMins,r=t.durationSecs,o=t.mainArtists,s=t.personnel,i=t.writers,c=t.originalVersion,l=t._id,u=t.sideOrDisc,m=t.order,d=Object(z.a)(Object(z.a)(Object(z.a)(Object(z.a)(Object(z.a)({title:n,duration:60*parseInt(a)+parseInt(r)},!!o&&{mainArtists:o}),!!s&&{personnel:s}),!!i&&{writers:i}),!!c&&{originalVersion:c}),!!l&&{_id:l});if(l)this.props.submitTrack(d,l),this.props.toggleEditForm();else{var p={track:d,trackListing:{order:m,sideOrDisc:u}};this.props.submitTrack(p,this.props.releaseId)}}},{key:"addSide",value:function(){var e=this.state.numberOfSides+1;this.setState({numberOfSides:e,sideLabels:this.getSideLabels(e)})}},{key:"makeCurrentPersonnelForFormSection",value:function(e){var t=this;return e.map((function(e){var n=e.personnelIds.map((function(e){return t.props.statePersonnel[e].name}));return Object.assign({},e,{personnelDisplay:n})}))}},{key:"render",value:function(){var e=this.state,t=e.title,n=e.durationMins,a=e.durationSecs,o=e.order,s=e.sideLabels,i=e.showMainArtistsField,c=e.showPersonnelField,l=e.showWritersField,u=e._id,m=this.props,d=m.releaseFormat,p=m.getDefaultArtists,h=m.releaseId;return r.a.createElement("form",{className:"track-form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-section"},r.a.createElement("input",{type:"text",placeholder:"Title",required:!0,value:t,className:"title-input",onChange:this.updateField("title")}),!u&&r.a.createElement("div",{className:"track-number"},r.a.createElement("div",null,"Track Number"),r.a.createElement("button",{className:"link-button",type:"button",onClick:this.addSide},r.a.createElement(Re.a,{icon:"plus"}),r.a.createElement("span",null,"Add Side")),r.a.createElement("div",null,r.a.createElement("select",{className:"track-side-input",onChange:this.updateField("sideOrDisc"),defaultValue:""},r.a.createElement("option",{disabled:!0,value:""},"Side"),s.length>0&&s.map((function(e,t){return r.a.createElement("option",{value:t+1,key:"".concat(d).concat(e).concat(t)},e)}))),r.a.createElement("input",{type:"number",placeholder:"No.",value:o,min:1,required:!0,className:"track-number-input",onChange:this.updateField("order")}))),r.a.createElement("div",null,r.a.createElement("div",null,"Duration"),r.a.createElement("div",null,r.a.createElement("input",{type:"number",placeholder:"MM",value:n,onChange:this.updateField("durationMins"),className:"time-input"})," : ",r.a.createElement("input",{type:"number",placeholder:"SS",value:a,required:!0,max:59,className:"time-input",onChange:this.updateField("durationSecs")}))),r.a.createElement("button",{type:"submit",className:"big-button"},u?"Update Track":"Add Track")),r.a.createElement("div",{className:"form-section add-personnel-menu"},r.a.createElement("button",{className:"link-button",type:"button",onClick:this.showPersonnelField("showMainArtistsField")},r.a.createElement(Re.a,{icon:i?"minus":"plus"}),r.a.createElement("span",null,i?"Ignore":"Add"," Artist(s)")),r.a.createElement("button",{className:"link-button",type:"button",onClick:this.showPersonnelField("showWritersField")},r.a.createElement(Re.a,{icon:l?"minus":"plus"}),r.a.createElement("span",null,l?"Ignore":"Add"," Writer(s)")),r.a.createElement("button",{className:"link-button",type:"button",onClick:this.showPersonnelField("showPersonnelField")},r.a.createElement(Re.a,{icon:c?"minus":"plus"}),r.a.createElement("span",null,c?"Ignore":"Add"," Other Credits"))),i&&r.a.createElement("div",{className:"form-section"},r.a.createElement("span",null,"Main Artist(s):"),r.a.createElement(mt,{formUpdate:this.updateSelectField,multiSelect:!0,recordType:"personnel",fieldName:"mainArtists",placeholderText:"Main Artist(s)...",defaultSelected:p("mainArtists",u||h)})),l&&r.a.createElement("div",{className:"form-section"},r.a.createElement("span",null,"Writer(s):"),r.a.createElement(mt,{formUpdate:this.updateSelectField,multiSelect:!0,recordType:"personnel",fieldName:"writers",placeholderText:"Writer(s)...",defaultSelected:u?p("writers",u):""})),c&&r.a.createElement("div",{className:"form-section personnel-section"},r.a.createElement("span",null,"Other Credit(s):"),r.a.createElement(gt,{currentPersonnel:u?this.makeCurrentPersonnelForFormSection(this.props.track.personnel):[],formUpdate:this.updatePersonnelField})))}}]),n}(a.Component),ft=Object(ve.connect)((function(e){return{stateTracks:e.entities.tracks,statePersonnel:e.entities.personnel,stateReleases:e.entities.releases,getDefaultArtists:function(t,n){return Object.keys(e.entities.personnel).length>0?e.entities.tracks[n][t].map((function(t){return e.entities.personnel[t]})):[]}}}),(function(e){return{submitTrack:function(t,n){return e(A(t,n))}}}))(bt),Et=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={showTrackPersonnel:a.props.showPersonnel,trackPersonnelLoaded:!1,editTrack:!1},a.toggleTrackPersonnel=a.toggleTrackPersonnel.bind(Object(Ge.a)(a)),a.toggleEditForm=a.toggleEditForm.bind(Object(Ge.a)(a)),a.closeEditForm=a.closeEditForm.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidUpdate",value:function(e,t){e.showPersonnel!==this.props.showPersonnel&&this.setState({showTrackPersonnel:this.props.showPersonnel}),this.state.trackPersonnelLoaded||!this.state.showTrackPersonnel||this.props.trackPersonnelLoading||this.setState({trackPersonnelLoaded:!0})}},{key:"toggleTrackPersonnel",value:function(){var e=this.props,t=e.track,n=e.fetchResourcePersonnel,a=e.loadedTrackPersonnel,r=this.state,o=r.showTrackPersonnel;r.trackPersonnelLoaded||a||n("track",t._id),this.setState({showTrackPersonnel:!o})}},{key:"toggleEditForm",value:function(){var e=this.props,t=e.track,n=e.fetchResourcePersonnel,a=e.loadedTrackPersonnel,r=this.state,o=r.editTrack;r.trackPersonnelLoaded||a||n("track",t._id),this.setState({editTrack:!o})}},{key:"closeEditForm",value:function(){this.setState({editTrack:!1,trackPersonnelLoaded:!1})}},{key:"render",value:function(){var e=this.props,t=e.track,n=e.statePersonnel,a=e.ordered,o=e.order,s=e.trackPersonnelLoading,i=e.showEditButtons,c=t.title,l=t.duration,u=t.deleted,m=t.personnel,d=t.mainArtists,p=t.writers,h=this.state,g=h.showTrackPersonnel,b=h.trackPersonnelLoaded,f=h.editTrack,E=m.length>0||d.length>0||p.length>0;return r.a.createElement("li",{className:"tracks-index-item tracks-index-track-item ".concat(u?"deleted":"")},f?!s||b?r.a.createElement("div",null,r.a.createElement("button",{className:"big-button white-button",onClick:this.toggleEditForm},"Cancel"),r.a.createElement(ft,{track:t,toggleEditForm:this.closeEditForm})):r.a.createElement("div",{className:"track-personnel-details"},r.a.createElement(Pe,null)):r.a.createElement("div",{className:"main-track-details"},r.a.createElement("span",{className:"track-expand-info"},r.a.createElement("button",{className:"icon-button",onClick:this.toggleTrackPersonnel},r.a.createElement(Re.a,{icon:g?"minus-square":"plus-square"}))),r.a.createElement("span",{className:"track-order"},a?u?"".concat(o,"*"):o:"*"),r.a.createElement("span",{className:"track-title"},c,u?" [track deleted from database]":i&&r.a.createElement("button",{className:"icon-button",onClick:this.toggleEditForm},r.a.createElement(Re.a,{icon:"edit"}))),r.a.createElement("span",{className:"track-duration"},u?"".concat(Ae(l),"*"):Ae(l))),g&&!f&&(!s||b?r.a.createElement("div",{className:"track-personnel-details"},E?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"track-personnel-main"},d.length>0&&r.a.createElement("span",null,r.a.createElement("span",{className:"track-personnel-label"},"Performed by:"),Te(d.map((function(e){return n[e]})))),p.length>0&&r.a.createElement("span",null,r.a.createElement("span",{className:"track-personnel-label"},"Written by:"),Te(p.map((function(e){return n[e]}))))),m.length>0&&r.a.createElement("div",{className:"track-personnel-credits"},r.a.createElement("span",{className:"track-personnel-label"},"Credits:"),m.map((function(e,t){var a=e.personnelIds.map((function(e){return n[e]}));return r.a.createElement("span",{key:"".concat(e._id,"-").concat(t),className:"track-personnel-credit"},e.role," \u2014"," ",Te(a))})))):r.a.createElement("div",{className:"track-personnel-main"},r.a.createElement("span",null,"No track credits added yet..."))):r.a.createElement("div",{className:"track-personnel-details"},r.a.createElement(Pe,null))))}}]),n}(a.Component),vt=Object(ve.connect)((function(e){return{trackPersonnelLoading:e.loading.trackPersonnel,statePersonnel:e.entities.personnel}}),(function(e){return{fetchResourcePersonnel:function(t,n){return e(Object(_.e)(t,n))}}}))(Et),Ot=Object(ve.connect)((function(e){return{stateTracks:e.entities.tracks,statePersonnel:e.entities.personnel,stateReleases:e.entities.releases,getDefaultArtists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mainArtists",n=arguments.length>1?arguments[1]:void 0;return Object.keys(e.entities.personnel).length>0?e.entities.releases[n][t].map((function(t){return e.entities.personnel[t]})):[]}}}),(function(e){return{submitTrack:function(t,n){return e(L(t,n))}}}))(bt),kt=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={initialLoad:!1,showTrackPersonnel:!1,loadedTrackPersonnel:!1,sortRule:a.props.trackListing?"trackOrderAsc":"alphaAsc",showMainEditMenu:!1,showNewTrackForm:!1,numberOfSides:null,letterSides:null,sideLabels:[],showDeleted:!1},a.toggleTrackPersonnel=a.toggleTrackPersonnel.bind(Object(Ge.a)(a)),a.makeIndexTracks=a.makeIndexTracks.bind(Object(Ge.a)(a)),a.toggleEditSection=a.toggleEditSection.bind(Object(Ge.a)(a)),a.makeSectionedTracks=a.makeSectionedTracks.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.fetchResourceTracks,a=t.fetchResourceTracksPersonnel,r=t.resourceType,o=t.resourceId,s=t.releaseFormat;n(r,o),this.state.showTrackPersonnel&&!this.state.loadedTrackPersonnel&&(a(r,o),this.setState({loadedTrackPersonnel:!0})),s&&this.setState({numberOfSides:this.getNumberOfSides(),letterSides:["LP","Cassette"].includes(this.props.releaseFormat)},(function(){e.setState({sideLabels:e.getSideLabels()})}))}},{key:"getSideLabels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.numberOfSides;return this.state.letterSides?pt.a.slice(0,e):Object(tt.a)(Array(e).keys()).map((function(e){return e+1}))}},{key:"componentDidUpdate",value:function(e){if(this.state.initialLoad||!e.tracksLoading||this.props.tracksLoading||this.setState({initialLoad:!0}),e.trackListing!==this.props.trackListing&&this.state.showTrackPersonnel){var t=this.props,n=t.fetchResourceTracksPersonnel,a=t.resourceId;n(t.resourceType,a)}}},{key:"toggleTrackPersonnel",value:function(){var e=this.state,t=e.loadedTrackPersonnel,n=e.showTrackPersonnel,a=this.props,r=a.fetchResourceTracksPersonnel,o=a.resourceType,s=a.resourceId;t?this.setState({showTrackPersonnel:!n}):(r(o,s),this.setState({showTrackPersonnel:!n,loadedTrackPersonnel:!0}))}},{key:"makeIndexTracks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.trackListing,t=this.props.stateTracks,n=this.state.showDeleted;switch(this.state.sortRule){case"trackOrderAsc":return e.sort((function(e,t){return e.order-t.order})).map((function(e){return t[e.trackId]})).filter((function(e){return!e||(!!n||!e.deleted)}));case"trackOrderDesc":return e.sort((function(e,t){return t.order-e.order})).map((function(e){return t[e.trackId]})).filter((function(e){return!e||(!!n||!e.deleted)}));case"alphaAsc":return Object.values(t).sort((function(e,t){return e.title-t.title}));case"alphaDesc":return Object.values(t).sort((function(e,t){return t.title-e.title}));default:return[]}}},{key:"makeSectionedTracks",value:function(){var e=this,t=[];return this.state.sideLabels.forEach((function(n,a){var r=e.props.trackListing.filter((function(e){return parseInt(e.sideOrDisc)===a+1}));t.push(e.makeIndexTracks(r))})),t}},{key:"getNumberOfSides",value:function(){return this.props.trackListing.map((function(e){return e.sideOrDisc})).reduce((function(e,t){return e>t?e:t}),0)}},{key:"toggleEditSection",value:function(e){var t=this;return function(n){return t.setState(Object($.a)({},e,!t.state[e]))}}},{key:"render",value:function(){var e=this.props,t=e.hideHeader,n=e.showEditButtons,o=e.trackListing,s=e.resourceId,i=e.releaseFormat,c=e.personnelLoading,l=e.tracksLoading,u=this.state,m=u.initialLoad,d=u.showTrackPersonnel,p=u.loadedTrackPersonnel,h=u.showMainEditMenu,g=u.showNewTrackForm,b=u.numberOfSides,f=u.letterSides,E=u.sideLabels,v=b?this.makeSectionedTracks():this.makeIndexTracks();return l?r.a.createElement("div",{className:"tracks-index-container"},r.a.createElement(Pe,null)):r.a.createElement("div",{className:"tracks-index-container"},!t&&r.a.createElement("div",{className:"resource-show-section-header"},r.a.createElement("h2",null,"Track List"),n&&r.a.createElement("button",{className:"big-button",onClick:this.toggleEditSection("showMainEditMenu")},r.a.createElement(Re.a,{icon:"edit"}),r.a.createElement("span",null,"Edit Tracks"))),r.a.createElement("ul",{className:"tracks-index"},n&&h&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tracks-index-item tracks-index-menu-row"},r.a.createElement("button",{className:"big-button",onClick:this.toggleEditSection("showNewTrackForm")},r.a.createElement(Re.a,{icon:"plus"}),r.a.createElement("span",null,"Add Track"))),g&&!c&&r.a.createElement("div",{className:"tracks-index-item tracks-index-form-row"},r.a.createElement(Ot,{releaseId:s,releaseFormat:i,numberOfSides:b,letterSides:f}))),r.a.createElement("div",{className:"tracks-index-item tracks-index-header-row"},r.a.createElement("div",{className:"main-track-details tracks-index-column-titles"},r.a.createElement("span",{className:"track-expand-info"},r.a.createElement("button",{className:"icon-button",onClick:this.toggleTrackPersonnel},r.a.createElement(Re.a,{icon:d?"minus-square":"plus-square"}))),r.a.createElement("span",{className:"track-order"},o?"#":""),r.a.createElement("span",{className:"track-title"},"Title"),r.a.createElement("span",{className:"track-duration"},"Duration"))),m?b?r.a.createElement(r.a.Fragment,null,v.length>0&&v.map((function(e,t){return r.a.createElement(a.Fragment,{key:"section-".concat(t)},r.a.createElement("li",{className:"tracks-index-item tracks-index-side-row"},r.a.createElement("span",null,r.a.createElement("img",{src:De.a,className:"default-image record-side-icon",alt:""}),f?"Side ":"Disc ",E[t]),r.a.createElement("span",{className:"track-duration"},Ae(e.reduce((function(e,t){return e+t.duration}),0)))),e.map((function(e,t){return r.a.createElement(vt,{key:e._id,track:e,ordered:!!o,order:t+1,showPersonnel:d,loadedTrackPersonnel:p,showEditButtons:n})})))})),!!o&&r.a.createElement("li",{className:"tracks-index-item tracks-index-header-row"},r.a.createElement("div",{className:"main-track-details"},r.a.createElement("span",{className:"tracks-total-duration"},o.length," track",1===o.length?"":"s"," \u2014 Total Duration:"," ",Ae(this.makeIndexTracks().reduce((function(e,t){return e+t.duration}),0)))))):r.a.createElement(r.a.Fragment,null,v.length>0&&v.map((function(e,t){return r.a.createElement(vt,{key:e._id,track:e,ordered:!!o,order:t+1,showPersonnel:d,loadedTrackPersonnel:p,showEditButtons:n})})),!!o&&r.a.createElement("li",{className:"tracks-index-item tracks-index-header-row"},r.a.createElement("div",{className:"main-track-details"},r.a.createElement("span",{className:"tracks-total-duration"},o.length," track",1===o.length?"":"s"," \u2014 Total Duration:"," ",Ae(v.reduce((function(e,t){return e+t.duration}),0)))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"tracks-index-item"},r.a.createElement(Pe,null)),r.a.createElement("li",{className:"tracks-index-item tracks-index-header-row"},"Loading..."))),n&&r.a.createElement("div",null,r.a.createElement("button",{className:"link-button",onClick:this.toggleEditSection("showDeleted")},"Show deleted tracks")))}}]),n}(a.Component),Nt=Object(ve.connect)((function(e){return{stateTracks:e.entities.tracks,statePersonnel:e.entities.personnel,tracksLoading:e.loading.tracks,tracksPersonnelLoading:e.loading.tracksPersonnel,personnelLoading:e.loading.personnel}}),(function(e){return{fetchResourceTracks:function(t,n){return e(T(t,n))},fetchResourceTracksPersonnel:function(t,n){return e(Object(_.f)(t,n))}}}))(kt);function yt(e){var t=e.role,n=e.personnel;return r.a.createElement("li",{className:"personnel-index-item"},Te(n)," \u2014 ",r.a.createElement("span",{className:"personnel-role"},t))}var St=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={personnel:[]},a.makeCurrentPersonnelForFormSection=a.makeCurrentPersonnelForFormSection.bind(Object(Ge.a)(a)),a.updatePersonnelField=a.updatePersonnelField.bind(Object(Ge.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){this.setState({personnel:this.props.currentPersonnel})}},{key:"makeCurrentPersonnelForFormSection",value:function(){var e=this;return this.props.currentPersonnel.map((function(t){var n=t.personnelIds.map((function(t){return e.props.statePersonnel[t].name}));return Object.assign({},t,{personnelDisplay:n})}))}},{key:"updatePersonnelField",value:function(e){this.setState({personnel:e.length>0?e:null})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,n=t.resourceId,a=t.submitPersonnel,r=t.toggleForm;a(n,Object.assign({},{personnel:this.state.personnel})),r()}},{key:"render",value:function(){return r.a.createElement("form",{className:"personnel-role-form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"submit-section"},r.a.createElement("button",{type:"submit",className:"big-button"},"Submit")),r.a.createElement(gt,{currentPersonnel:this.makeCurrentPersonnelForFormSection(),formUpdate:this.updatePersonnelField}))}}]),n}(a.Component),It=Object(ve.connect)((function(e){return{statePersonnel:e.entities.personnel,loading:e.loading.personnel}}),(function(e){return{submitPersonnel:function(t,n){return e(Object(j.m)(t,n))}}}))(St),Ct=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={showPersonnelRoleForm:!1,initialLoad:!1},a.togglePersonnelRoleForm=a.togglePersonnelRoleForm.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.fetchResourcePersonnel)(e.resourceType,e.resourceId),this.setState({initialLoad:!0})}},{key:"componentDidUpdate",value:function(e){if(e.resourcePersonnel!==this.props.resourcePersonnel){var t=this.props;(0,t.fetchResourcePersonnel)(t.resourceType,t.resourceId)}}},{key:"togglePersonnelRoleForm",value:function(){this.setState({showPersonnelRoleForm:!this.state.showPersonnelRoleForm})}},{key:"render",value:function(){var e=this.props,t=e.resourcePersonnel,n=e.statePersonnel,a=e.showEditButtons,o=e.hideHeader,s=e.loading,i=e.resourceId,c=this.state,l=c.showPersonnelRoleForm,u=c.initialLoad;return r.a.createElement("div",{className:"personnel-index-container"},!o&&r.a.createElement("div",{className:"resource-show-section-header"},r.a.createElement("h2",null,"Personnel"),a&&(l?r.a.createElement("button",{className:"big-button",onClick:this.togglePersonnelRoleForm},r.a.createElement(Re.a,{icon:"edit"}),r.a.createElement("span",null,"Cancel")):r.a.createElement("button",{className:"big-button",onClick:this.togglePersonnelRoleForm},r.a.createElement(Re.a,{icon:"edit"}),r.a.createElement("span",null,"Edit Personnel")))),r.a.createElement("ul",{className:"personnel-index"},s?r.a.createElement("li",{className:"personnel-index-item"},r.a.createElement(Pe,null)):l?r.a.createElement(It,{currentPersonnel:t,resourceId:i,toggleForm:this.togglePersonnelRoleForm}):u&&t.length>0&&t.map((function(e,t){var a=e.personnelIds.map((function(e){return n[e]}));return a[0]&&r.a.createElement(yt,{personnel:a,role:e.role,key:"".concat(e._id,"-personnelIndex-").concat(t)})}))))}}]),n}(a.Component),jt=Object(ve.connect)((function(e){return{statePersonnel:e.entities.personnel,loading:e.loading.personnel}}),(function(e){return{fetchResourcePersonnel:function(t,n){return e(Object(_.e)(t,n))}}}))(Ct),Ft=n(54),wt=n.n(Ft),Rt=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={body:a.props.comment?a.props.comment.body:""},a.textareaRef=r.a.createRef(),a.updateBody=a.updateBody.bind(Object(Ge.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){var e=this.textareaRef.current;wt()(e)}},{key:"updateBody",value:function(e){this.setState({body:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,n=t.submitComment,a=t.hideCommentForm;n(this.props,this.state),a()}},{key:"render",value:function(){var e=this.state.body;return r.a.createElement("form",{className:"comment-form",onSubmit:this.handleSubmit},r.a.createElement("textarea",{placeholder:"Enter comment text...",value:e,onChange:this.updateBody,ref:this.textareaRef,rows:"1"}),r.a.createElement("button",{className:"big-button",type:"submit"},r.a.createElement(Re.a,{icon:"save"}),r.a.createElement("span",null,"Save Comment")))}}]),n}(a.Component),Pt=Object(ve.connect)((function(e){return{currentUser:e.session.user,newComment:!0}}),(function(e){return{submitComment:function(t,n){var a=t.resourceId,r=t.resourceType,o=t.parentCommentId,s=t.currentUser,i={resourceType:r,resourceId:a,body:n.body,parentCommentId:o,userId:s.id,username:s.username};return e(K(i))}}}))(Rt),Tt=Object(ve.connect)((function(e){return{currentUser:e.session.user,newComment:!1}}),(function(e){return{submitComment:function(t,n){var a=t.comment,r={body:n.body};return e(H(a._id,r))}}}))(Rt),At=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={showReplyForm:!1,deleting:!1,showEditForm:!1,showChildComments:!0},a.toggleReplyForm=a.toggleReplyForm.bind(Object(Ge.a)(a)),a.toggleEditForm=a.toggleEditForm.bind(Object(Ge.a)(a)),a.handleLike=a.handleLike.bind(Object(Ge.a)(a)),a.handleDelete=a.handleDelete.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"toggleReplyForm",value:function(){this.setState({showReplyForm:!this.state.showReplyForm})}},{key:"toggleEditForm",value:function(){this.setState({showEditForm:!this.state.showEditForm})}},{key:"handleLike",value:function(){var e=this.props;(0,e.likeComment)(e.comment._id)}},{key:"handleDelete",value:function(){var e=this.props;(0,e.deleteComment)(e.comment._id),this.setState({deleting:!0})}},{key:"render",value:function(){var e=this.props,t=e.comment,n=e.resourceComments,a=e.indentLevel,o=e.resourceType,s=e.resourceId,i=e.currentUser,c=e.loggedIn,l=t.body,u=t.username,m=t.userId,d=t.createdAt,p=t.updatedAt,h=t.likes,g=t.deleted,b=this.state,f=b.showReplyForm,E=b.deleting,v=b.showEditForm,O=b.showChildComments,k=!(!i||!h)&&!!h[i.id];return r.a.createElement("li",{className:"comment"},g?r.a.createElement("div",{className:"comment-details deleted"},r.a.createElement("span",null,"[This comment has been deleted]")):r.a.createElement("div",{className:"comment-details"},r.a.createElement("span",{className:"comment-attribution"},r.a.createElement(Oe.b,{to:"/user/".concat(m)},u)),r.a.createElement("span",{className:"comment-created-on",title:t.createdAt===t.updatedAt?"posted at ".concat(it()(d).format("LLL")):"edited at ".concat(it()(p).format("LLL"))},it()(d).format("LLL"),t.createdAt===t.updatedAt?"":r.a.createElement("span",{className:"edited-indicator"},"*",r.a.createElement("span",{className:"indicator-text"},"edited")))),!g&&r.a.createElement(r.a.Fragment,null,v?r.a.createElement(Tt,{comment:t,hideCommentForm:this.toggleEditForm}):r.a.createElement("div",{className:"comment-body"},l),r.a.createElement("div",{className:"comment-interactions"},c&&r.a.createElement("span",{className:"comment-reply"},r.a.createElement("button",{className:"link-button",onClick:this.toggleReplyForm},f?"Cancel":"Reply")),r.a.createElement("span",{className:"comment-like"},r.a.createElement("button",{className:"link-button likes-button ".concat(c?k?"liked":"unliked":""),onClick:this.handleLike,title:k?"Unlike":"Like",disabled:!c},r.a.createElement(Re.a,{icon:"heart"}),r.a.createElement("span",null,h?Object.values(h).length:0))),i&&(i.id===m||i.isAdmin)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"comment-delete"},r.a.createElement("button",{className:"link-button",onClick:this.handleDelete},E?"Deleting...":"Delete")),r.a.createElement("span",{className:"comment-edit"},r.a.createElement("button",{className:"link-button",onClick:this.toggleEditForm},v?"Cancel":"Edit")))),f&&r.a.createElement(Pt,{resourceType:o,resourceId:s,parentCommentId:t._id,hideCommentForm:this.toggleReplyForm})),O&&r.a.createElement(Mt,{resourceComments:n,indentLevel:a,parentCommentId:t._id,resourceId:s,resourceType:o}))}}]),n}(a.Component),Lt=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"render",value:function(){var e=this.props,t=e.stateComments,n=e.resourceComments,a=e.indentLevel,o=e.parentCommentId,s=e.likeComment,i=e.resourceType,c=e.resourceId,l=e.currentUser,u=e.deleteComment,m=e.loggedIn,d=Object.values(t).filter((function(e){return e.resourceId===c&&e.parentCommentId===o})),p={borderColor:function(){switch(a%4){case 0:return"olivedrab";case 1:return"royalblue";case 2:return"salmon";case 3:return"rebeccapurple";default:return"revert"}}()};return r.a.createElement("ul",{className:"comments-index indent-"+a,style:p},d.length>0&&d.sort((function(e,t){return Date.parse(t.createdAt)-Date.parse(e.createdAt)})).map((function(e){var o=t[e._id];return o&&r.a.createElement(At,{key:o._id,comment:o,resourceComments:n,indentLevel:a+1,resourceId:c,resourceType:i,likeComment:s,currentUser:l,deleteComment:u,loggedIn:m})})))}}]),n}(a.Component),Mt=Object(ve.connect)((function(e){return{stateComments:e.entities.comments,loading:e.loading.comments,loggedIn:e.session.isAuthenticated,currentUser:e.session.user}}),(function(e){return{fetchResourceComments:function(t,n){return e(G(t,n))},likeComment:function(t){return e(Y(t))},deleteComment:function(t){return e(W(t))}}}))(Lt),Dt=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={initialLoad:!1,showComments:!(a.props.smallCommentsSection&&a.props.resourceComments.length>0),showCommentForm:!1},a.toggleComments=a.toggleComments.bind(Object(Ge.a)(a)),a.toggleCommentForm=a.toggleCommentForm.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchResourceComments,n=e.resourceId,a=e.resourceType;e.resourceComments.length>0&&t(a,n),this.setState({initialLoad:!0})}},{key:"toggleComments",value:function(){this.setState({showComments:!this.state.showComments})}},{key:"toggleCommentForm",value:function(){this.setState({showCommentForm:!this.state.showCommentForm})}},{key:"render",value:function(){var e=this.props,t=e.resourceComments,n=e.resourceId,a=e.resourceType,o=e.loggedIn,s=e.smallCommentsSection,i=e.loading,c=e.stateComments,l=this.state,u=l.initialLoad,m=l.showComments,d=l.showCommentForm,p=Object.values(c).filter((function(e){return e.resourceId===n})).length;return r.a.createElement("div",null,s?r.a.createElement("div",{className:"small-comments-section-header"},p>0?m?r.a.createElement("button",{className:"link-button",onClick:this.toggleComments},"Hide Comment",1===p?"":"s"):r.a.createElement("button",{className:"link-button",onClick:this.toggleComments},"Show ",p," Comment",1===p?"":"s"):r.a.createElement("span",{className:"disabled-void-text"},"No comments..."),o&&r.a.createElement("button",{className:"big-button add-comment-button",onClick:this.toggleCommentForm},r.a.createElement(Re.a,{icon:"comment"}),r.a.createElement("span",null,d?"Cancel":"Add a Comment"))):r.a.createElement("div",{className:"resource-show-section-header"},r.a.createElement("h2",null,"Comments"),o&&r.a.createElement("button",{className:"big-button add-comment-button",onClick:this.toggleCommentForm},r.a.createElement(Re.a,{icon:"comment"}),r.a.createElement("span",null,d?"Cancel":"Add a Comment"))),d&&r.a.createElement(Pt,{resourceType:a,resourceId:n,parentCommentId:null,hideCommentForm:this.toggleCommentForm}),u&&!i&&m&&r.a.createElement(Mt,{resourceComments:t,indentLevel:0,resourceId:n,resourceType:a,parentCommentId:null}))}}]),n}(a.Component),_t=Object(ve.connect)((function(e){return{loggedIn:e.session.isAuthenticated,loading:e.loading.comments,stateComments:e.entities.comments}}),(function(e){return{fetchResourceComments:function(t,n){return e(G(t,n))}}}))(Dt),Bt=n(41),Ut=n.n(Bt),xt=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={body:a.props.review?a.props.review.body:"",rating:a.props.review?a.props.review.rating:0},a.textareaRef=r.a.createRef(),a.updateBody=a.updateBody.bind(Object(Ge.a)(a)),a.updateRating=a.updateRating.bind(Object(Ge.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){var e=this.textareaRef.current;wt()(e)}},{key:"updateBody",value:function(e){this.setState({body:e.target.value})}},{key:"updateRating",value:function(e){this.setState({rating:e})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,n=t.submitReview,a=t.hideReviewForm;n(this.props,this.state),a&&a()}},{key:"render",value:function(){var e=this.state,t=e.body,n=e.rating;return r.a.createElement("form",{className:"review-form",onSubmit:this.handleSubmit},r.a.createElement("textarea",{placeholder:"Enter review text...",value:t,onChange:this.updateBody,ref:this.textareaRef,rows:"5"}),r.a.createElement("div",{className:"ratings-section"},r.a.createElement(Ut.a,{value:n,size:18,half:!1,edit:!0,className:"rating-stars",onChange:this.updateRating}),r.a.createElement("span",null,0===n?"Add a Rating":"".concat(n," / 5 Stars"))),r.a.createElement("button",{className:"big-button",type:"submit"},r.a.createElement(Re.a,{icon:"save"}),r.a.createElement("span",null,"Save Review")))}}]),n}(a.Component),Vt=n(30).editReview,Gt=(0,n(9).connect)((function(e){return{currentUser:e.session.user}}),(function(e){return{submitReview:function(t,n){var a=t.review,r={body:n.body,rating:n.rating};return e(Vt(a._id,r))}}}))(xt),Kt=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={commentsFetched:!1,deleting:!1,showEditForm:!1},a.handleLike=a.handleLike.bind(Object(Ge.a)(a)),a.handleDelete=a.handleDelete.bind(Object(Ge.a)(a)),a.toggleEditForm=a.toggleEditForm.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.review,t=e._id;e.comments.length>0&&this.props.fetchResourceComments("review",t),this.setState({commentsFetched:!0})}},{key:"toggleEditForm",value:function(){this.setState({showEditForm:!this.state.showEditForm})}},{key:"handleLike",value:function(){var e=this.props,t=e.review;(0,e.likeReview)(t._id)}},{key:"handleDelete",value:function(){var e=this.props,t=e.review;(0,e.deleteReview)(t._id),this.setState({deleting:!0})}},{key:"render",value:function(){var e=this.props,t=e.review,n=e.currentUser,a=t.rating,o=t.body,s=t.username,i=t.userId,c=t.comments,l=t._id,u=t.createdAt,m=t.updatedAt,d=t.likes,p=this.state,h=p.deleting,g=p.showEditForm,b=!(!n||!d)&&!!d[n.id];return r.a.createElement("li",{className:"reviews-index-item"},r.a.createElement("div",{className:"review-details"},r.a.createElement("span",{className:"review-attribution"},"Reviewed by ",r.a.createElement(Oe.b,{to:"/users/".concat(i)},s)),r.a.createElement("span",{className:"review-created-on",title:u===m?"posted at ".concat(it()(u).format("LLL")):"edited at ".concat(it()(m).format("LLL"))},"on ",it()(u).format("LL"),u===m?"":r.a.createElement("span",{className:"edited-indicator"},"*",r.a.createElement("span",{className:"indicator-text"},"edited"))),r.a.createElement("div",{className:"review-interactions"},r.a.createElement("span",{className:"review-add-comment"},r.a.createElement("button",{className:"link-button"},"Add Comment")),r.a.createElement("span",{className:"review-like"},r.a.createElement("button",{className:"link-button likes-button ".concat(b?"liked":"unliked"),onClick:this.handleLike},r.a.createElement(Re.a,{icon:"heart"}),r.a.createElement("span",null,d?Object.values(d).length:0))),n&&n.id===i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"review-edit"},r.a.createElement("button",{className:"link-button",onClick:this.toggleEditForm},h?"Cancel":"Edit")),r.a.createElement("span",{className:"review-delete"},r.a.createElement("button",{className:"link-button",onClick:this.handleDelete},h?"Deleting...":"Delete"))))),g?r.a.createElement(Gt,{review:t,hideReviewForm:this.toggleEditForm}):r.a.createElement("div",{className:"review-body"},o),r.a.createElement("div",null,r.a.createElement("span",null,"Rating:"),r.a.createElement(Ut.a,{value:a,size:18,edit:!1})),r.a.createElement("div",null,r.a.createElement(_t,{resourceComments:c,resourceId:l,resourceType:"review",smallCommentsSection:!0})))}}]),n}(a.Component),Yt=n(30).createNewReview,Wt=(0,n(9).connect)((function(e){return{currentUser:e.session.user}}),(function(e){return{submitReview:function(t,n){var a=t.resourceId,r=t.resourceType,o=t.currentUser,s={resourceType:r,resourceId:a,body:n.body,rating:n.rating,userId:o.id,username:o.username};return e(Yt(s))}}}))(xt),Ht=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={showReviewForm:!1},a.toggleReviewForm=a.toggleReviewForm.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchResourceReviews,n=e.resourceId;t(e.resourceType,n)}},{key:"toggleReviewForm",value:function(){this.setState({showReviewForm:!this.state.showReviewForm})}},{key:"render",value:function(){var e=this.props,t=e.resourceId,n=e.resourceType,a=e.stateReviews,o=e.fetchOneReview,s=e.loggedIn,i=e.loading,c=e.fetchResourceComments,l=e.likeReview,u=e.currentUser,m=e.deleteReview,d=this.state.showReviewForm,p=Object.values(a).filter((function(e){return e.resourceType===n&&e.resourceId===t})),h=1*p.reduce((function(e,t){return e+t.rating}),0)/p.length;return r.a.createElement("div",{className:"reviews-index-container"},r.a.createElement("div",{className:"resource-show-section-header"},r.a.createElement("h2",null,"Reviews"),s&&r.a.createElement("button",{className:"big-button",onClick:this.toggleReviewForm},r.a.createElement(Re.a,{icon:"pen-fancy"}),r.a.createElement("span",null,d?"Cancel":"Add a Review"))),d?r.a.createElement(Wt,{resourceId:t,resourceType:n,hideReviewForm:this.toggleReviewForm}):r.a.createElement("div",{className:"reviews-average-rating"},r.a.createElement(Ut.a,{value:Math.round(10*h)/10||0,size:18,half:!0,edit:!1,className:"rating-stars"}),r.a.createElement("div",null,"Average Rating: ",Math.round(10*h)/10||"No Ratings")),r.a.createElement("ul",{className:"reviews-index"},i?r.a.createElement("li",{className:"reviews-index-item"},r.a.createElement(Pe,{className:"extra-vertical-padding"})):p.length>0&&p.map((function(e){return e&&r.a.createElement(Kt,{review:e,key:e._id,fetchOneReview:o,fetchResourceComments:c,likeReview:l,currentUser:u,deleteReview:m})}))))}}]),n}(a.Component),Jt=Object(ve.connect)((function(e){return{stateReviews:e.entities.reviews,loading:e.loading.reviews,loggedIn:e.session.isAuthenticated,currentUser:e.session.user}}),(function(e){return{fetchOneReview:function(t){return e(Object(re.fetchOneReview)(t))},fetchResourceReviews:function(t,n){return e(Object(re.fetchResourceReviews)(t,n))},fetchResourceComments:function(t,n){return e(G(t,n))},likeReview:function(t){return e(Object(re.likeReview)(t))},deleteReview:function(t){return e(Object(re.deleteReview)(t))}}}))(Ht),Zt=n(75),Qt=n.n(Zt),zt=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={file:null,fileUrl:a.props.currentImage?a.props.currentImage.imageUrl:"",description:a.props.currentImage?a.props.currentImage.description:"",mainImage:!!a.props.currentImage&&a.props.currentImage.mainImage},a.updateImageFile=a.updateImageFile.bind(Object(Ge.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ge.a)(a)),a.updateDescription=a.updateDescription.bind(Object(Ge.a)(a)),a.updateMainImage=a.updateMainImage.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"updateImageFile",value:function(e){var t=this,n=new FileReader,a=e.target.files[0];n.onloadend=function(){return t.setState({file:a,fileUrl:n.result})},a?n.readAsDataURL(a):this.setState({file:null,fileUrl:""})}},{key:"updateDescription",value:function(e){this.setState({description:e.target.value})}},{key:"updateMainImage",value:function(e){this.setState({mainImage:!this.state.mainImage})}},{key:"handleSubmit",value:function(e){var t=this.state,n=t.file,a=t.description,r=t.mainImage,o=this.props,s=o.resourceType,i=o.resourceId,c=o.addImage,l=o.toggleForm;e.preventDefault();var u=new FormData;u.append("file",n),u.append("description",a),u.append("mainImage",JSON.stringify(r)),c(s,i,u),l()}},{key:"render",value:function(){var e=this.state,t=e.description,n=e.mainImage,a=e.fileUrl;return r.a.createElement("form",{className:"image-form",onSubmit:this.handleSubmit},r.a.createElement("h2",null,"Add Image"),r.a.createElement("input",{type:"file",className:"image-file-input",id:"custom-file",onChange:this.updateImageFile}),a&&r.a.createElement("img",{src:a,className:"preview-image",alt:"Preview"}),r.a.createElement("input",{type:"text",placeholder:"Description...",value:t,onChange:this.updateDescription}),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:n,onChange:this.updateMainImage}),"Make this the main image?"),r.a.createElement("button",{className:"big-button",type:"submit"},r.a.createElement(Re.a,{icon:"save"}),r.a.createElement("span",null,"Save Image")))}}]),n}(a.Component),Xt=n(56),qt=Object(ve.connect)(null,(function(e){return{addImage:function(t,n,a){return e(Object(Xt.addResourceImage)(t,n,a))}}}))(zt),$t=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={description:a.props.currentImage.description,mainImage:a.props.currentImage.mainImage,alreadyMainImage:a.props.currentImage.mainImage},a.updateDescription=a.updateDescription.bind(Object(Ge.a)(a)),a.updateMainImage=a.updateMainImage.bind(Object(Ge.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ge.a)(a)),a.deleteImage=a.deleteImage.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"updateDescription",value:function(e){this.setState({description:e.target.value})}},{key:"updateMainImage",value:function(e){this.setState({mainImage:!this.state.mainImage})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.description,a=t.mainImage,r=this.props,o=r.editResourceImageInfo,s=r.resourceType,i=r.resourceId,c=r.currentImage,l=r.toggleEditForm,u={description:n,mainImage:a};o(s,i,c._id,u),l()}},{key:"deleteImage",value:function(){var e=this.props,t=e.deleteResourceImage,n=e.resourceType,a=e.resourceId,r=e.currentImage,o=e.toggleEditForm;(0,e.decrement)(),t(n,a,r._id),o()}},{key:"render",value:function(){var e=this.state,t=e.description,n=e.mainImage,a=e.alreadyMainImage;return r.a.createElement("form",{className:"image-info-form",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",placeholder:"Description...",value:t,onChange:this.updateDescription}),a?r.a.createElement("div",null,r.a.createElement("span",null,"This is currently the main image for this"," ",this.props.resourceType)):r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:n,onChange:this.updateMainImage}),"Make this the main image?"),r.a.createElement("div",{className:"submit-buttons"},r.a.createElement("button",{type:"submit",className:"big-button"},r.a.createElement(Re.a,{icon:"save"}),r.a.createElement("span",null,"Update Image")),a?r.a.createElement("span",null,"You can't delete the main image. Select/upload a different main image first"):r.a.createElement("button",{type:"button",className:"big-button",onClick:this.deleteImage},r.a.createElement(Re.a,{icon:"times"}),r.a.createElement("span",null,"Delete Image"))))}}]),n}(a.Component),en=n(56),tn=en.editResourceImageInfo,nn=en.deleteResourceImage,an=Object(ve.connect)(null,(function(e){return{editResourceImageInfo:function(t,n,a,r){return e(tn(t,n,a,r))},deleteResourceImage:function(t,n,a){return e(nn(t,n,a))}}}))($t),rn=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={displayedImageIndex:a.props.selectedImage?a.props.selectedImage:a.props.images.findIndex((function(e){return e.mainImage})),showEditForm:!1},a.incrementDisplayedImageIndex=a.incrementDisplayedImageIndex.bind(Object(Ge.a)(a)),a.decrementDisplayedImageIndex=a.decrementDisplayedImageIndex.bind(Object(Ge.a)(a)),a.setDisplayedImageIndex=a.setDisplayedImageIndex.bind(Object(Ge.a)(a)),a.toggleEditForm=a.toggleEditForm.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"toggleEditForm",value:function(){this.setState({showEditForm:!this.state.showEditForm})}},{key:"incrementDisplayedImageIndex",value:function(){var e=this.props.images,t=this.state.displayedImageIndex;this.setState({displayedImageIndex:(t+1)%e.length})}},{key:"decrementDisplayedImageIndex",value:function(){var e=this.props.images,t=this.state.displayedImageIndex;this.setState({displayedImageIndex:0===t?e.length-1:(t-1)%e.length})}},{key:"setDisplayedImageIndex",value:function(e){var t=this;return function(n){return t.setState({displayedImageIndex:e})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.images,a=t.loggedIn,o=t.resourceId,s=t.resourceType,i=this.state,c=i.displayedImageIndex,l=i.showEditForm;return n.length>0?r.a.createElement("div",{className:"images-gallery"},r.a.createElement("div",{className:"gallery-displayed-image-container"},r.a.createElement("img",{src:n[c].imageUrl,alt:n[c].description,className:"gallery-displayed-image"}),l?r.a.createElement("div",{className:"image-description"},r.a.createElement(an,{resourceType:s,resourceId:o,currentImage:n[c],toggleEditForm:this.toggleEditForm,decrement:this.decrementDisplayedImageIndex})):n[c].description&&r.a.createElement("div",{className:"image-description"},r.a.createElement("span",{className:"description-text"},n[c].description))),r.a.createElement("div",{className:"gallery-navigation-buttons"},r.a.createElement("button",{className:"big-button ".concat(l?"disabled":""),onClick:this.decrementDisplayedImageIndex,disabled:l},r.a.createElement("span",null,"Prev")),a&&r.a.createElement("button",{className:"big-button",onClick:this.toggleEditForm},r.a.createElement(Re.a,{icon:l?"times":"edit"}),r.a.createElement("span",null,l?"Cancel":"Edit Image")),r.a.createElement("button",{className:"big-button ".concat(l?"disabled":""),onClick:this.incrementDisplayedImageIndex,disabled:l},r.a.createElement("span",null,"Next"))),r.a.createElement("div",{className:"gallery-thumbnail-index"},n.map((function(t,n){return r.a.createElement("img",{src:t.imageUrl,key:"".concat(n,"-").concat(t._id),alt:t.description,className:"gallery-thumbnail ".concat(c===n?"selected":""),onClick:e.setDisplayedImageIndex(n)})})))):r.a.createElement("div",{className:"images-gallery"},r.a.createElement("h2",null,"No Images"))}}]),n}(a.Component),on=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={showNewForm:!1},a.stopClickPropagation=a.stopClickPropagation.bind(Object(Ge.a)(a)),a.toggleNewForm=a.toggleNewForm.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"stopClickPropagation",value:function(e){e.stopPropagation()}},{key:"toggleNewForm",value:function(){this.setState({showNewForm:!this.state.showNewForm})}},{key:"render",value:function(){var e=this.props,t=e.toggleImageModal,n=e.resourceType,a=e.resourceId,o=e.loggedIn,s=e.images,i=this.state.showNewForm;return r.a.createElement("div",{className:"images-modal",onClick:t},r.a.createElement("div",{className:"images-modal-content-wrapper",onClick:this.stopClickPropagation},o&&r.a.createElement("button",{className:"big-button edit-images-button",onClick:this.toggleNewForm},r.a.createElement(Re.a,{icon:i?"times":"edit"}),r.a.createElement("span",null,i?"Cancel":"Add Images")),r.a.createElement("button",{className:"big-button modal-close-button",onClick:t},r.a.createElement(Re.a,{icon:"times"})),r.a.createElement("div",{className:"images-modal-content"},i?r.a.createElement(qt,{resourceType:n,resourceId:a,toggleForm:this.toggleNewForm}):r.a.createElement(rn,{images:s,loggedIn:o,resourceType:n,resourceId:a}))))}}]),n}(a.Component),sn=Object(ve.connect)((function(e){return{loggedIn:e.session.isAuthenticated}}),null)(on),cn=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={label:a.setCurrentLabel(),loaded:!1,currentLabelForFormSection:[]},a.makeCurrentLabelForFormSection=a.makeCurrentLabelForFormSection.bind(Object(Ge.a)(a)),a.updateLabelField=a.updateLabelField.bind(Object(Ge.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ge.a)(a)),a.setCurrentLabel=a.setCurrentLabel.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){this.setState({loaded:!0,currentLabelForFormSection:this.makeCurrentLabelForFormSection()})}},{key:"setCurrentLabel",value:function(){return this.props.currentLabel.map((function(e){return{personnelIds:e.labelIds,role:e.catalogueNumber}}))}},{key:"makeCurrentLabelForFormSection",value:function(){var e=this;return this.state.label?this.state.label.map((function(t){var n=t.personnelIds.map((function(t){return e.props.statePersonnel[t].name}));return Object.assign({},t,{personnelDisplay:n})})):[]}},{key:"updateLabelField",value:function(e){this.setState({label:e.length>0?e:[]})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,n=t.resourceId,a=t.submitLabel,r=t.toggleForm,o=this.state.label.map((function(e){return{labelIds:e.personnelIds,catalogueNumber:e.role}}));a(n,Object.assign({},{label:o})),r()}},{key:"render",value:function(){return this.state.loaded&&r.a.createElement("form",{className:"personnel-role-form resource-main-info-form",onSubmit:this.handleSubmit},r.a.createElement(gt,{currentPersonnel:this.state.currentLabelForFormSection,formUpdate:this.updateLabelField,labelCatNoForm:!0}),r.a.createElement("button",{className:"icon-button",type:"submit"},r.a.createElement(Re.a,{icon:"save"})),r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.props.toggleForm},r.a.createElement(Re.a,{icon:"undo-alt"})))}}]),n}(a.Component),ln=Object(ve.connect)((function(e){return{statePersonnel:e.entities.personnel}}),(function(e){return{submitLabel:function(t,n){return e(Object(j.m)(t,n))}}}))(cn),un=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={releaseYear:a.props.release.releaseYear||"",editYear:!1,releaseCountry:a.props.release.releaseCountry||"",editCountry:!1,format:a.props.release.format||"",editFormat:!1,mainArtists:a.props.release.mainArtists.length>0?a.props.release.mainArtists:[],editTitle:!1,title:a.props.release.title||"",editLabel:!1,label:a.props.release.label.length>0?a.props.release.label:[],showImageModal:!1,initialLoad:!1},a.toggleForm=a.toggleForm.bind(Object(Ge.a)(a)),a.updateField=a.updateField.bind(Object(Ge.a)(a)),a.getDefaultPersonnel=a.getDefaultPersonnel.bind(Object(Ge.a)(a)),a.updateSelectField=a.updateSelectField.bind(Object(Ge.a)(a)),a.toggleImageModal=a.toggleImageModal.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.fetchResourcePersonnel)(e.resourceType,e.resourceId),this.setState({initialLoad:!0})}},{key:"toggleForm",value:function(e){var t=this;return function(n){return t.setState(Object($.a)({},e,!t.state[e]))}}},{key:"toggleImageModal",value:function(e){e.preventDefault(),this.setState({showImageModal:!this.state.showImageModal})}},{key:"updateField",value:function(e){var t=this;return"releaseYear"===e?function(n){return t.setState(Object($.a)({},e,parseInt(n.currentTarget.value)))}:function(n){return t.setState(Object($.a)({},e,n.currentTarget.value))}}},{key:"updateSelectField",value:function(e,t){var n=t?t.map((function(e){return e.value})):null;this.setState(Object($.a)({},e,n))}},{key:"handleSubmit",value:function(e,t){var n=this;return function(a){a.preventDefault();var r=Object($.a)({},e,n.state[e]);n.props.updateRelease(n.props.release._id,r),n.setState(Object($.a)({},t,!1))}}},{key:"getDefaultPersonnel",value:function(e){var t=this.props,n=t.release,a=t.statePersonnel;return Object.keys(a).length>0?n[e].map((function(e){return a[e]})):[]}},{key:"render",value:function(){var e=this.props,t=e.release,n=e.showEditButtons,a=e.loadingPersonnel,o=e.statePersonnel,s=t.images,i=t._id,c=t.label,l=this.state,u=l.editYear,m=l.releaseYear,d=l.releaseCountry,p=l.editCountry,h=l.editFormat,g=l.format,b=l.mainArtists,f=l.editLabel,E=l.showImageModal,v=l.editTitle,O=l.title,k=l.editMainArtists,N=l.initialLoad,y=s.find((function(e){return!0===e.mainImage}));return r.a.createElement("div",{className:"resource-main-info"},r.a.createElement("div",{className:"resource-image"},r.a.createElement("img",{src:y?y.imageUrl:De.a,className:y?"main-image":"main-image default-image",alt:y?y.description:"Default album placeholder image - upload a new one!",onClick:this.toggleImageModal}),r.a.createElement("button",{className:"big-button",onClick:this.toggleImageModal},r.a.createElement(Re.a,{icon:"images"}),r.a.createElement("span",null,"More Images")),E&&r.a.createElement(sn,{toggleImageModal:this.toggleImageModal,resourceType:"release",resourceId:i,images:s})),a||!N?r.a.createElement("div",{className:"resource-details"},r.a.createElement(Pe,null)):r.a.createElement("div",{className:"resource-details"},b&&r.a.createElement("div",{className:"resource-heading"},r.a.createElement("span",null,r.a.createElement("div",null,k?r.a.createElement("form",{className:"resource-main-info-form",onSubmit:this.handleSubmit("mainArtists","editMainArtists")},r.a.createElement(mt,{formUpdate:this.updateSelectField,recordType:"personnel",multiSelect:!0,fieldName:"mainArtists",placeholderText:"Label(s)...",defaultSelected:this.getDefaultPersonnel("mainArtists")}),r.a.createElement("button",{className:"icon-button",type:"submit"},r.a.createElement(Re.a,{icon:"save"})),r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editMainArtists")},r.a.createElement(Re.a,{icon:"undo-alt"}))):r.a.createElement("span",{className:"resource-title-value"},b.length>0&&r.a.createElement("h2",null,Object.values(o).length>0&&Te(t.mainArtists.map((function(e){return o[e]})))),n&&r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editMainArtists")},r.a.createElement(Re.a,{icon:"edit"}),r.a.createElement("span",null,"Edit Main Artists")))),r.a.createElement("div",null,r.a.createElement("h2",null,"\u2014")),r.a.createElement("div",null,v?r.a.createElement("form",{className:"resource-main-info-form heading-form",onSubmit:this.handleSubmit("title","editTitle")},r.a.createElement("input",{type:"text",className:"resource-title-input",onChange:this.updateField("title"),value:O}),r.a.createElement("div",null,r.a.createElement("button",{className:"icon-button",type:"submit"},r.a.createElement(Re.a,{icon:"save"})),r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editTitle")},r.a.createElement(Re.a,{icon:"undo-alt"})))):r.a.createElement("span",{className:"resource-title-value"},r.a.createElement("h2",null,t.title),n&&r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editTitle")},r.a.createElement(Re.a,{icon:"edit"}),r.a.createElement("span",null,"Edit Title"))))),r.a.createElement(Xe.a,null,r.a.createElement("title",null,Object.values(o).length>0&&function(e,t){var n=t.title,a=t.format,r=t.releaseYear,o=t.releaseCountry,s=e.map((function(e){return e.name})).join(", "),i=[r,a,o].filter(Boolean).join(", ");return"".concat(e.length>0?s:""," - ").concat(n).concat(i?" (".concat(i,")"):""," | dancey")}(t.mainArtists.map((function(e){return o[e]})),this.state)))),r.a.createElement("div",null,r.a.createElement("span",{className:"details-label"},"Label:"),f?r.a.createElement(ln,{toggleForm:this.toggleForm("editLabel"),resourceId:i,currentLabel:t.label}):r.a.createElement("span",{className:"details-value"},c.length>0&&r.a.createElement(r.a.Fragment,null,Object.values(o).length>0&&t.label.map((function(e,t){return r.a.createElement("div",{key:"labelIds-".concat(t),className:"label-value-div"},Te(e.labelIds.map((function(e){return o[e]})))," ","\u2014 ",e.catalogueNumber)}))),n&&r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editLabel")},r.a.createElement(Re.a,{icon:"edit"})))),r.a.createElement("div",null,r.a.createElement("span",{className:"details-label"},"Format:"),h?r.a.createElement("form",{className:"resource-main-info-form",onSubmit:this.handleSubmit("format","editFormat")},r.a.createElement("select",{onChange:this.updateField("format"),value:g,placeholder:"Format"},r.a.createElement("option",{disabled:!0,value:""},"Select a release format"),Qt.a.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("button",{className:"icon-button",type:"submit"},r.a.createElement(Re.a,{icon:"save"})),r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editFormat")},r.a.createElement(Re.a,{icon:"undo-alt"}))):r.a.createElement("span",{className:"details-value"},g&&r.a.createElement("span",null,t.format),n&&r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editFormat")},r.a.createElement(Re.a,{icon:"edit"})))),r.a.createElement("div",null,r.a.createElement("span",{className:"details-label"},"Release Country:"),p?r.a.createElement("form",{className:"resource-main-info-form",onSubmit:this.handleSubmit("releaseCountry","editCountry")},r.a.createElement("select",{onChange:this.updateField("releaseCountry"),value:d,placeholder:"Release Country"},r.a.createElement("option",{disabled:!0,value:""},"Select a country"),Object.keys(Je.a).map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("button",{className:"icon-button",type:"submit"},r.a.createElement(Re.a,{icon:"save"})),r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editCountry")},r.a.createElement(Re.a,{icon:"undo-alt"}))):r.a.createElement("span",{className:"details-value"},d&&r.a.createElement("span",null,t.releaseCountry),n&&r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editCountry")},r.a.createElement(Re.a,{icon:"edit"})))),r.a.createElement("div",null,r.a.createElement("span",{className:"details-label"},"Release Year:"),u?r.a.createElement("form",{className:"resource-main-info-form",onSubmit:this.handleSubmit("releaseYear","editYear")},r.a.createElement("input",{type:"number",min:"1890",max:"2030",value:m,onChange:this.updateField("releaseYear")}),r.a.createElement("button",{className:"icon-button",type:"submit"},r.a.createElement(Re.a,{icon:"save"})),r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editYear")},r.a.createElement(Re.a,{icon:"undo-alt"}))):r.a.createElement("span",{className:"details-value"},m&&r.a.createElement("span",null,t.releaseYear),n&&r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editYear")},r.a.createElement(Re.a,{icon:"edit"}))))))}}]),n}(r.a.Component),mn=Object(ve.connect)((function(e){return{loadingPersonnel:e.loading.personnel,statePersonnel:e.entities.personnel}}),(function(e){return{fetchResourcePersonnel:function(t,n){return e(Object(_.e)(t,n))}}}))(un),dn=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={showEditButtons:!1,initialLoad:!1},a.loadReleaseData=a.loadReleaseData.bind(Object(Ge.a)(a)),a.toggleEditButtons=a.toggleEditButtons.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"loadReleaseData",value:function(){var e=this.props;(0,e.fetchRelease)(e.releaseId)}},{key:"componentDidMount",value:function(){this.loadReleaseData()}},{key:"componentDidUpdate",value:function(e){var t=this;e.loading&&!this.props.loading&&this.setState({initialLoad:!0}),e.releaseId!==this.props.releaseId&&this.setState({initialLoad:!1},(function(){return t.loadReleaseData()}))}},{key:"toggleEditButtons",value:function(){this.setState({showEditButtons:!this.state.showEditButtons})}},{key:"render",value:function(){var e=this.props,t=e.release,n=e.loggedIn,a=e.updateRelease,o=this.state,s=o.showEditButtons,i=o.initialLoad;if(t&&i){var c=t.personnel,l=t.trackListing,u=t.comments,m=t._id,d=t.format;return r.a.createElement("div",{className:"resource-show-container"},n&&r.a.createElement("button",{className:"big-button toggle-edit-button "+(s?"edit-mode-on":"edit-mode-off"),onClick:this.toggleEditButtons},r.a.createElement(Re.a,{icon:s?"toggle-on":"toggle-off"}),r.a.createElement("span",null,s?"Edit Mode: On":"Edit Mode: Off")),r.a.createElement(mn,{release:t,loggedIn:n,resourceId:m,resourceType:"release",updateRelease:a,toggleEditButtons:this.toggleEditButtons,showEditButtons:s}),r.a.createElement("div",{className:"resource-show-body"},r.a.createElement("div",{className:"resource-show-main"},r.a.createElement("div",{className:"release-tracklist"},r.a.createElement(Nt,{trackListing:l,resourceId:m,resourceType:"release",releaseFormat:d,showEditButtons:s})),r.a.createElement("div",{className:"release-personnel"},r.a.createElement(jt,{resourcePersonnel:c,resourceId:m,resourceType:"release",showEditButtons:s})),r.a.createElement("div",{className:"comments-container"},r.a.createElement(_t,{resourceComments:u,resourceId:m,resourceType:"release"}))),r.a.createElement("div",{className:"resource-show-aside"},r.a.createElement("div",{className:"reviews-container"},r.a.createElement(Jt,{resourceType:"release",resourceId:m,showEditButtons:s})))))}return r.a.createElement("div",{className:"resource-show-container"},r.a.createElement(Pe,null))}}]),n}(a.Component),pn=Object(ve.connect)((function(e,t){var n=t.match.params.releaseId,a=e.entities,r=a.personnel,o=a.tracks,s=a.comments,i=a.releases,c=a.reviews;return{releaseId:n,release:e.entities.releases[n],personnel:r,tracks:o,comments:s,releases:i,reviews:c,loading:e.loading.releases,loggedIn:e.session.isAuthenticated}}),(function(e){return{fetchRelease:function(t){return e(Object(j.h)(t))},updateRelease:function(t,n){return e(Object(j.m)(t,n))}}}))(dn);function hn(e){return r.a.createElement("footer",{className:"site-footer"},r.a.createElement("ul",{className:"footer-menu"},r.a.createElement("li",null,r.a.createElement("a",{href:"http://nashsibanda.com"},"nashsibanda.com")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://github.com/nashsibanda/picbait"},"github"))))}var gn=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={currentElement:""},a.updateCurrentString=a.updateCurrentString.bind(Object(Ge.a)(a)),a.addString=a.addString.bind(Object(Ge.a)(a)),a.removeString=a.removeString.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"updateCurrentString",value:function(e){e.preventDefault(),e.currentTarget.value?this.setState({currentElement:e.currentTarget.value}):this.setState({currentElement:""})}},{key:"addString",value:function(e){if("Enter"===e.key){e.preventDefault(),e.stopPropagation();var t=this.props.array;t.push(this.state.currentElement.trim());var n=Object(tt.a)(new Set(t));this.props.updateArray(n),this.setState({currentElement:""})}}},{key:"removeString",value:function(e,t){e.preventDefault();var n=this.props.array.filter((function(e){return e!==t}));this.props.updateArray(n)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"string-array-select"},r.a.createElement("input",{type:"text",onKeyPress:this.addString,onChange:this.updateCurrentString,value:this.state.currentElement}),r.a.createElement("ul",{className:"string-array-list form-string-array-list"},this.props.array.map((function(t){return r.a.createElement("li",{key:t},r.a.createElement("button",{className:"big-button",onClick:function(n){return e.removeString(n,t)}},r.a.createElement(Re.a,{icon:"times"}),r.a.createElement("span",null,t)))}))))}}]),n}(a.Component),bn=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={dateOfBirth:a.props.personnel.dateOfBirth?it()(a.props.personnel.dateOfBirth).format("Y-MM-DD"):"",editDateOfBirth:!1,countryOfOrigin:a.props.personnel.countryOfOrigin||"",editCountry:!1,alsoKnownAs:a.props.personnel.alsoKnownAs.length>0?Array.from(a.props.personnel.alsoKnownAs):[],expandAlsoKnownAs:!1,editName:!1,name:a.props.personnel.name||"",editLabel:!1,showImageModal:!1,editAlsoKnownAs:!1},a.toggleForm=a.toggleForm.bind(Object(Ge.a)(a)),a.updateField=a.updateField.bind(Object(Ge.a)(a)),a.updateSelectField=a.updateSelectField.bind(Object(Ge.a)(a)),a.toggleImageModal=a.toggleImageModal.bind(Object(Ge.a)(a)),a.updateAlsoKnownAs=a.updateAlsoKnownAs.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"toggleForm",value:function(e){var t=this;return function(n){return t.setState(Object($.a)({},e,!t.state[e]))}}},{key:"toggleImageModal",value:function(e){e.preventDefault(),this.setState({showImageModal:!this.state.showImageModal})}},{key:"updateField",value:function(e){var t=this;return function(n){return t.setState(Object($.a)({},e,n.currentTarget.value))}}},{key:"updateAlsoKnownAs",value:function(e){this.setState({alsoKnownAs:e})}},{key:"updateSelectField",value:function(e,t){var n=t?t.map((function(e){return e.value})):null;this.setState(Object($.a)({},e,n))}},{key:"handleSubmit",value:function(e,t){var n=this;return function(a){a.preventDefault();var r=Object($.a)({},e,n.state[e]);n.props.updatePersonnel(n.props.personnel._id,r),n.setState(Object($.a)({},t,!1))}}},{key:"render",value:function(){var e=this.props,t=e.personnel,n=e.showEditButtons,a=e.loadingPersonnel,o=t.images,s=t._id,i=this.state,c=i.editDateOfBirth,l=i.dateOfBirth,u=i.countryOfOrigin,m=i.editCountry,d=i.alsoKnownAs,p=i.showImageModal,h=i.editAlsoKnownAs,g=i.editName,b=i.name,f=i.expandAlsoKnownAs,E=o.find((function(e){return!0===e.mainImage}));return r.a.createElement("div",{className:"resource-main-info"},r.a.createElement("div",{className:"resource-image"},r.a.createElement("img",{src:E?E.imageUrl:lt.a,className:E?"main-image":"main-image default-image",alt:E?E.description:"Default placeholder image - upload a new one!",onClick:this.toggleImageModal}),r.a.createElement("button",{className:"big-button",onClick:this.toggleImageModal},r.a.createElement(Re.a,{icon:"images"}),r.a.createElement("span",null,"More Images")),p&&r.a.createElement(sn,{toggleImageModal:this.toggleImageModal,resourceType:"personnel",resourceId:s,images:o})),a?r.a.createElement("div",{className:"resource-details"},r.a.createElement(Pe,null)):r.a.createElement("div",{className:"resource-details"},r.a.createElement("div",{className:"resource-heading"},g?r.a.createElement("form",{className:"resource-main-info-form heading-form",onSubmit:this.handleSubmit("name","editName")},r.a.createElement("input",{type:"text",className:"resource-title-input",onChange:this.updateField("name"),value:b}),r.a.createElement("div",null,r.a.createElement("button",{className:"icon-button",type:"submit"},r.a.createElement(Re.a,{icon:"save"})),r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editName")},r.a.createElement(Re.a,{icon:"undo-alt"})))):r.a.createElement("span",{className:"resource-title-value"},r.a.createElement("h2",null,t.name),n&&r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editName")},r.a.createElement(Re.a,{icon:"edit"}),r.a.createElement("span",null,"Edit Name"))),r.a.createElement(Xe.a,null,r.a.createElement("title",null,t.name))),r.a.createElement("div",null,r.a.createElement("span",{className:"details-label"},"Also Known As:"),h?r.a.createElement("form",{className:"resource-main-info-form",onSubmit:this.handleSubmit("alsoKnownAs","editAlsoKnownAs")},r.a.createElement(gn,{array:d,updateArray:this.updateAlsoKnownAs}),r.a.createElement("button",{className:"icon-button",type:"submit"},r.a.createElement(Re.a,{icon:"save"})),r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editAlsoKnownAs")},r.a.createElement(Re.a,{icon:"undo-alt"}))):r.a.createElement("span",{className:"details-value"},d&&(d.length<5||f?r.a.createElement("span",null,t.alsoKnownAs.length>0?t.alsoKnownAs.join(", "):"N/A",d.length>4&&r.a.createElement(r.a.Fragment,null,"   ",r.a.createElement("button",{className:"link-button",onClick:this.toggleForm("expandAlsoKnownAs")},"Less..."))):r.a.createElement("span",{className:"aka-contracted"},t.alsoKnownAs.length>0?t.alsoKnownAs.slice(0,4).join(", "):"N/A",!f&&r.a.createElement(r.a.Fragment,null,", ",r.a.createElement("button",{className:"link-button",onClick:this.toggleForm("expandAlsoKnownAs")},"More...")))),n&&r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editAlsoKnownAs")},r.a.createElement(Re.a,{icon:"edit"})))),r.a.createElement("div",null,r.a.createElement("span",{className:"details-label"},"Country Of Origin:"),m?r.a.createElement("form",{className:"resource-main-info-form",onSubmit:this.handleSubmit("countryOfOrigin","editCountry")},r.a.createElement("select",{onChange:this.updateField("countryOfOrigin"),value:u,placeholder:"Country Of Origin"},r.a.createElement("option",{disabled:!0,value:""},"Select a country"),Object.keys(Je.a).map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("button",{className:"icon-button",type:"submit"},r.a.createElement(Re.a,{icon:"save"})),r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editCountry")},r.a.createElement(Re.a,{icon:"undo-alt"}))):r.a.createElement("span",{className:"details-value"},u&&r.a.createElement("span",null,t.countryOfOrigin),n&&r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editCountry")},r.a.createElement(Re.a,{icon:"edit"})))),r.a.createElement("div",null,r.a.createElement("span",{className:"details-label"},"Date of Birth:"),c?r.a.createElement("form",{className:"resource-main-info-form",onSubmit:this.handleSubmit("dateOfBirth","editDateOfBirth")},r.a.createElement("input",{type:"date",value:l,onChange:this.updateField("dateOfBirth")}),r.a.createElement("button",{className:"icon-button",type:"submit"},r.a.createElement(Re.a,{icon:"save"})),r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editDateOfBirth")},r.a.createElement(Re.a,{icon:"undo-alt"}))):r.a.createElement("span",{className:"details-value"},l&&r.a.createElement("span",null,it()(t.dateOfBirth).format("LL")),n&&r.a.createElement("button",{className:"icon-button",type:"button",onClick:this.toggleForm("editDateOfBirth")},r.a.createElement(Re.a,{icon:"edit"}))))))}}]),n}(r.a.Component),fn=Object(ve.connect)(null,null)(bn),En=Object(ve.connect)((function(e){return{releases:e.entities.releases,loading:e.loading.releases,releasesIndexCount:e.ui.releasesIndexCount,defaultItemsPerPage:12}}),(function(e){return{fetchReleases:function(t,n,a,r){return e(Object(j.j)(t,n,a,r))},getReleasesCount:function(t,n){return e(Object(j.f)(t,n))}}}))($e),vn=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={showEditButtons:!1,initialLoad:!1},a.loadPersonnelData=a.loadPersonnelData.bind(Object(Ge.a)(a)),a.toggleEditButtons=a.toggleEditButtons.bind(Object(Ge.a)(a)),a}return Object(je.a)(n,[{key:"loadPersonnelData",value:function(){var e=this.props;(0,e.fetchPersonnel)(e.personnelId)}},{key:"componentDidMount",value:function(){this.loadPersonnelData()}},{key:"componentDidUpdate",value:function(e){var t=this;e.loading&&!this.props.loading&&this.setState({initialLoad:!0}),e.personnelId!==this.props.personnelId&&this.setState({initialLoad:!1},(function(){return t.loadPersonnelData()}))}},{key:"toggleEditButtons",value:function(){this.setState({showEditButtons:!this.state.showEditButtons})}},{key:"render",value:function(){var e=this.props,t=e.currentPersonnel,n=e.loggedIn,a=e.updatePersonnel,o=this.state,s=o.showEditButtons,i=o.initialLoad;if(t&&i){var c=t.comments,l=t._id;return r.a.createElement("div",{className:"resource-show-container"},n&&r.a.createElement("button",{className:"big-button toggle-edit-button "+(s?"edit-mode-on":"edit-mode-off"),onClick:this.toggleEditButtons},r.a.createElement(Re.a,{icon:s?"toggle-on":"toggle-off"}),r.a.createElement("span",null,s?"Edit Mode: On":"Edit Mode: Off")),r.a.createElement(fn,{personnel:t,loggedIn:n,resourceId:l,resourceType:"personnel",updatePersonnel:a,toggleEditButtons:this.toggleEditButtons,showEditButtons:s}),r.a.createElement("div",{className:"resource-show-body"},r.a.createElement("div",{className:"resource-show-main"},r.a.createElement(En,{resourceType:"personnel",resourceId:l,indexTitle:"Discography"}),r.a.createElement("div",{className:"comments-container"},r.a.createElement(_t,{resourceComments:c,resourceId:l,resourceType:"personnel"}))),r.a.createElement("div",{className:"resource-show-aside"},r.a.createElement("div",{className:"reviews-container"},r.a.createElement(Jt,{resourceType:"personnel",resourceId:l,showEditButtons:s})))))}return r.a.createElement("div",{className:"resource-show-container"},r.a.createElement(Pe,null))}}]),n}(a.Component),On=Object(ve.connect)((function(e,t){var n=t.match.params.personnelId,a=e.entities,r=a.personnel,o=a.tracks,s=a.comments,i=a.releases,c=a.reviews;return{personnelId:n,currentPersonnel:e.entities.personnel[n],personnel:r,tracks:o,comments:s,releases:i,reviews:c,loading:e.loading.personnel,loggedIn:e.session.isAuthenticated}}),(function(e){return{fetchPersonnel:function(t){return e(Object(_.d)(t))},updatePersonnel:function(t,n){return e(Object(_.i)(t,n))}}}))(vn),kn=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(){var e;Object(Ce.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){return window.scrollTo(0,0)},e.componentDidUpdate=function(t){e.props.location!==t.location&&window.scrollTo(0,0)},e.render=function(){return e.props.children},e}return n}(a.PureComponent),Nn=Object(Ne.g)(kn),yn=Object(Ne.g)((function(e){var t=function(t,n){var a=n.resourceType,r=n.value;e.history.push("/".concat(a,"/").concat(r))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"site-header"},r.a.createElement("h1",{className:"site-header-title"},r.a.createElement(Oe.b,{to:"/"},"dancey")),r.a.createElement("nav",{className:"nav-menu"},r.a.createElement("span",{className:"nav-resources-menu"},r.a.createElement(Oe.b,{to:"/releases"},"Releases"),r.a.createElement(mt,{recordType:"all",multiSelect:!1,placeholderText:"Search...",optionLinks:!0,noCreate:!0,formUpdate:t})),r.a.createElement("span",{className:"nav-session-menu"},e.loggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.b,{className:"nav-button",to:"/profile"},r.a.createElement(Re.a,{icon:"user"}),r.a.createElement("span",null,"Profile")),r.a.createElement("button",{className:"nav-button",onClick:e.logoutUser},r.a.createElement(Re.a,{icon:"sign-out-alt"}),r.a.createElement("span",null,"Log Out"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"nav-button",onClick:e.openSessionForm("register")},r.a.createElement(Re.a,{icon:"user-plus"}),r.a.createElement("span",null,"Register")),r.a.createElement("button",{className:"nav-button",onClick:e.openSessionForm("login")},r.a.createElement(Re.a,{icon:"sign-in-alt"}),r.a.createElement("span",null,"Log In")))))))})),Sn=function(e){Object(Fe.a)(n,e);var t=Object(we.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(je.a)(n,[{key:"getForm",value:function(){var e=this.props,t=e.form,n=e.warning;switch(t){case"login":return r.a.createElement(We,{warning:n});case"register":return r.a.createElement(ze,null);default:return r.a.createElement(We,{warning:n})}}},{key:"doNotPropagate",value:function(e){e.stopPropagation()}},{key:"render",value:function(){return this.props.show&&r.a.createElement("div",{className:"session-form-modal",onClick:this.props.toggleSessionFormModal},r.a.createElement("div",{className:"session-form-container",onClick:this.doNotPropagate},this.getForm()))}}]),n}(a.Component),In=Object(ve.connect)((function(e){return{show:e.ui.showSessionFormModal}}),(function(e){return{toggleSessionFormModal:function(){return e({type:"TOGGLE_SESSION_FORM_MODAL"})}}}))(Sn),Cn=Object(ve.connect)((function(e){return{loggedIn:e.session.isAuthenticated,user:e.session.user}}),(function(e){return{logout:function(){return e(O())},toggleSessionFormModal:function(){return e({type:"TOGGLE_SESSION_FORM_MODAL"})}}}))((function(e){var t=Object(a.useState)("login"),n=Object(ke.a)(t,2),o=n[0],s=n[1],i=function(t){t.preventDefault(),e.logout()},c=function(t){return function(n){s(t),e.toggleSessionFormModal()}};return r.a.createElement("div",null,r.a.createElement(Nn,null,r.a.createElement(yn,{loggedIn:e.loggedIn,user:e.user,openSessionForm:c,logoutUser:i}),r.a.createElement(In,{form:o}),r.a.createElement("main",null,r.a.createElement(Ne.d,null,r.a.createElement(Ie,{exact:!0,path:"/login",component:We}),r.a.createElement(Ie,{exact:!0,path:"/register",component:ze}),r.a.createElement(Ne.b,{exact:!0,path:"/releases/:releaseId",component:pn}),r.a.createElement(Ne.b,{exact:!0,path:"/personnel/:personnelId",component:On}),r.a.createElement(Ne.b,{exact:!0,path:"/releases",component:et}),r.a.createElement(Ne.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(Ve,{openSessionForm:c,logoutUser:i,loggedIn:e.loggedIn,user:e.user})}}))),r.a.createElement(hn,null)))})),jn=function(e){var t=e.store;return r.a.createElement(ve.Provider,{store:t},r.a.createElement(Oe.a,null,r.a.createElement(Cn,null)))},Fn=(n(111),n(47)),wn=n(17);Fn.b.add(wn.d,wn.t,wn.u,wn.b,wn.k,wn.h,wn.g,wn.i,wn.j,wn.r,wn.l,wn.m,wn.n,wn.o,wn.v,wn.f,wn.x,wn.w,wn.c,wn.a,wn.s,wn.e,wn.q,wn.p),document.addEventListener("DOMContentLoaded",(function(){var e;if(localStorage.jwtToken){m(localStorage.jwtToken);var t=c()(localStorage.jwtToken);e=Ee({session:{isAuthenticated:!0,user:t}});var n=Date.now()/1e3;t.exp<n&&e.dispatch(O())}else e=Ee();var a=document.getElementById("root");s.a.render(r.a.createElement(jn,{store:e}),a)}))},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"k",(function(){return u})),n.d(t,"l",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"i",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"h",(function(){return f})),n.d(t,"f",(function(){return E})),n.d(t,"j",(function(){return v})),n.d(t,"m",(function(){return O}));var a=n(10),r=n.n(a),o=n(3),s="RECEIVE_RELEASE",i="RECEIVE_RELEASES",c="RECEIVE_RELEASES_COUNT",l="RECEIVE_RELEASE_ERRORS",u=function(e){return{type:s,release:e}},m=function(e){return{type:i,releases:e}},d=function(e){return{type:c,count:e}},p=function(e){return{type:l,errors:e}},h=function(e,t){return function(n){n(Object(o.t)()),function(e,t){return r.a.get("/api/releases?pageNum=".concat(e,"&itemsPerPage=").concat(t))}(e,t).then((function(e){n(m(e.data)),n(Object(o.s)())})).catch((function(e){n(p(e.response.data)),n(Object(o.s)())}))}},g=function(e,t){return function(n){n(Object(o.t)()),function(e,t){return r.a.get("/api/releases/random?".concat(e?"with_image=".concat(e,"&"):"","number=").concat(t))}(e,t).then((function(e){n(m(e.data)),n(Object(o.s)())})).catch((function(e){n(p(e.response.data)),n(Object(o.s)())}))}},b=function(){return function(e){r.a.get("/api/releases?count=true").then((function(t){return e(d(t.data))})).catch((function(t){return e(p(t.response.data))}))}},f=function(e){return function(t){t(Object(o.t)()),function(e){return r.a.get("api/releases/".concat(e))}(e).then((function(e){t(u(e.data)),t(Object(o.s)())})).catch((function(e){t(p(e.response.data)),t(Object(o.s)())}))}},E=function(e,t){return function(n){(function(e,t){return r.a.get("api/releases/".concat(e,"/").concat(t,"?count=true"))})(e,t).then((function(e){return n(d(e.data))})).catch((function(e){return n(p(e.response.data))}))}},v=function(e,t,n,a){return function(s){s(Object(o.t)()),function(e,t,n,a){return r.a.get("api/releases/".concat(n,"/").concat(a,"?pageNum=").concat(e,"&itemsPerPage=").concat(t))}(e,t,n,a).then((function(e){s(m(e.data)),s(Object(o.s)())})).catch((function(e){s(p(e.response.data)),s(Object(o.s)())}))}},O=function(e,t){return function(n){var a=["personnel","label","mainArtists"];Object.keys(t).some((function(e){return a.includes(e)}))&&n(Object(o.r)()),function(e,t){return r.a.put("/api/releases/".concat(e),t)}(e,t).then((function(e){n(u(e.data))})).catch((function(e){n(p(e.response.data))}))}}},19:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"i",(function(){return h}));var a=n(34),r=n(3),o="RECEIVE_PERSONNEL",s="RECEIVE_ONE_PERSONNEL",i="RECEIVE_PERSONNEL_ERRORS",c=function(e){return{type:o,personnel:e}},l=function(e){return{type:s,personnel:e}},u=function(e){return{type:i,errors:e}},m=function(e,t){return function(n){"release"===e&&n(Object(r.r)()),"track"===e&&n(Object(r.z)()),a.c(e,t).then((function(t){n(c(t.data)),"release"===e&&n(Object(r.q)()),"track"===e&&n(Object(r.y)())})).catch((function(t){n(u(t.response.data)),"release"===e&&n(Object(r.q)()),"track"===e&&n(Object(r.y)())}))}},d=function(e,t){return function(n){n(Object(r.z)()),a.d(e,t).then((function(e){n(c(e.data)),n(Object(r.y)())})).catch((function(e){n(u(e.response.data)),n(Object(r.y)())}))}},p=function(e){return function(t){t(Object(r.r)()),a.a(e).then((function(e){t(l(e.data)),t(Object(r.q)())})).catch((function(e){t(u(e.response.data)),t(Object(r.q)())}))}},h=function(e,t){return function(n){a.f(e,t).then((function(e){return n(l(e.data))})).catch((function(e){return n(u(e.response.data))}))}}},3:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"h",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"l",(function(){return l})),n.d(t,"k",(function(){return u})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return d})),n.d(t,"n",(function(){return p})),n.d(t,"m",(function(){return h})),n.d(t,"j",(function(){return g})),n.d(t,"i",(function(){return b})),n.d(t,"t",(function(){return f})),n.d(t,"s",(function(){return E})),n.d(t,"v",(function(){return v})),n.d(t,"u",(function(){return O})),n.d(t,"p",(function(){return k})),n.d(t,"o",(function(){return N})),n.d(t,"B",(function(){return y})),n.d(t,"A",(function(){return S})),n.d(t,"r",(function(){return I})),n.d(t,"q",(function(){return C})),n.d(t,"z",(function(){return j})),n.d(t,"y",(function(){return F})),n.d(t,"x",(function(){return w})),n.d(t,"w",(function(){return R}));var a="RELEASES_LOADING_ON",r="RELEASES_LOADING_OFF",o="REVIEWS_LOADING_ON",s="REVIEWS_LOADING_OFF",i="COMMENTS_LOADING_ON",c="COMMENTS_LOADING_OFF",l="TRACKS_LOADING_ON",u="TRACKS_LOADING_OFF",m="PERSONNEL_LOADING_ON",d="PERSONNEL_LOADING_OFF",p="TRACK_PERSONNEL_LOADING_ON",h="TRACK_PERSONNEL_LOADING_OFF",g="SESSION_LOADING_ON",b="SESSION_LOADING_OFF",f=function(){return{type:a}},E=function(){return{type:r}},v=function(){return{type:o}},O=function(){return{type:s}},k=function(){return{type:i}},N=function(){return{type:c}},y=function(){return{type:l}},S=function(){return{type:u}},I=function(){return{type:m}},C=function(){return{type:d}},j=function(){return{type:p}},F=function(){return{type:h}},w=function(){return{type:g}},R=function(){return{type:b}}},30:function(e,t,n){"use strict";n.r(t),n.d(t,"RECEIVE_REVIEWS",(function(){return s})),n.d(t,"RECEIVE_ONE_REVIEW",(function(){return i})),n.d(t,"CLEAR_ONE_REVIEW",(function(){return c})),n.d(t,"RECEIVE_REVIEW_ERRORS",(function(){return l})),n.d(t,"fetchResourceReviews",(function(){return d})),n.d(t,"fetchOneReview",(function(){return p})),n.d(t,"createNewReview",(function(){return h})),n.d(t,"likeReview",(function(){return g})),n.d(t,"deleteReview",(function(){return b})),n.d(t,"editReview",(function(){return f}));var a=n(3),r=n(10),o=n.n(r),s="RECEIVE_REVIEWS",i="RECEIVE_ONE_REVIEW",c="CLEAR_ONE_REVIEW",l="RECEIVE_REVIEW_ERRORS",u=function(e){return{type:i,review:e}},m=function(e){return{type:l,errors:e}},d=function(e,t){return function(n){n(Object(a.v)()),function(e,t){return o.a.get("api/reviews/get/".concat(e,"/").concat(t))}(e,t).then((function(e){n(function(e){return{type:s,reviews:e}}(e.data)),n(Object(a.u)())})).catch((function(e){n(m(e.response.data)),n(Object(a.u)())}))}},p=function(e){return function(t){t(Object(a.v)()),function(e){return o.a.get("api/reviews/".concat(e))}(e).then((function(e){t(u(e.data)),t(Object(a.u)())})).catch((function(e){t(m(e.response.data)),t(Object(a.u)())}))}},h=function(e){return function(t){var n;(n=e,o.a.post("/api/reviews",n)).then((function(e){return t(u(e.data))})).catch((function(e){return t(m(e.response.data))}))}},g=function(e){return function(t){(function(e){return o.a.put("/api/reviews/".concat(e,"/like"))})(e).then((function(e){return t(u(e.data))})).catch((function(e){return t(m(e.response.data))}))}},b=function(e){return function(t){(function(e){return o.a.delete("api/reviews/".concat(e))})(e).then((function(e){return t(function(e){return{type:c,review:e}}(e.data))})).catch((function(e){return t(m(e.response.data))}))}},f=function(e,t){return function(n){(function(e,t){return o.a.put("/api/reviews/".concat(e),t)})(e,t).then((function(e){return n(u(e.data))})).catch((function(e){return n(m(e.response.data))}))}}},32:function(e,t,n){e.exports=n.p+"static/media/plain_record.36d3bae1.png"},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return u}));var a=n(10),r=n.n(a),o=function(e){return r.a.get("/api/personnel/".concat(e))},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.a.get("api/search?keyword=".concat(e,"&type=personnel"))},i=function(e,t){return r.a.get("/api/personnel/get/".concat(e,"/").concat(t))},c=function(e,t){return r.a.get("/api/personnel/get/".concat(e,"/").concat(t,"/tracks"))},l=function(e){return r.a.post("/api/personnel/",e)},u=function(e,t){return r.a.put("/api/personnel/".concat(e),t)}},37:function(e,t){e.exports={Afghanistan:{name:"Afghanistan",code:"AF"},"\xc5land Islands":{name:"\xc5land Islands",code:"AX"},Albania:{name:"Albania",code:"AL"},Algeria:{name:"Algeria",code:"DZ"},"American Samoa":{name:"American Samoa",code:"AS"},Andorra:{name:"Andorra",code:"AD"},Angola:{name:"Angola",code:"AO"},Anguilla:{name:"Anguilla",code:"AI"},Antarctica:{name:"Antarctica",code:"AQ"},"Antigua and Barbuda":{name:"Antigua and Barbuda",code:"AG"},Argentina:{name:"Argentina",code:"AR"},Armenia:{name:"Armenia",code:"AM"},Aruba:{name:"Aruba",code:"AW"},Australia:{name:"Australia",code:"AU"},Austria:{name:"Austria",code:"AT"},Azerbaijan:{name:"Azerbaijan",code:"AZ"},Bahamas:{name:"Bahamas",code:"BS"},Bahrain:{name:"Bahrain",code:"BH"},Bangladesh:{name:"Bangladesh",code:"BD"},Barbados:{name:"Barbados",code:"BB"},Belarus:{name:"Belarus",code:"BY"},Belgium:{name:"Belgium",code:"BE"},Belize:{name:"Belize",code:"BZ"},Benin:{name:"Benin",code:"BJ"},Bermuda:{name:"Bermuda",code:"BM"},Bhutan:{name:"Bhutan",code:"BT"},"Bolivia, Plurinational State of":{name:"Bolivia, Plurinational State of",code:"BO"},"Bonaire, Sint Eustatius and Saba":{name:"Bonaire, Sint Eustatius and Saba",code:"BQ"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",code:"BA"},Botswana:{name:"Botswana",code:"BW"},"Bouvet Island":{name:"Bouvet Island",code:"BV"},Brazil:{name:"Brazil",code:"BR"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",code:"IO"},"Brunei Darussalam":{name:"Brunei Darussalam",code:"BN"},Bulgaria:{name:"Bulgaria",code:"BG"},"Burkina Faso":{name:"Burkina Faso",code:"BF"},Burundi:{name:"Burundi",code:"BI"},Cambodia:{name:"Cambodia",code:"KH"},Cameroon:{name:"Cameroon",code:"CM"},Canada:{name:"Canada",code:"CA"},"Cape Verde":{name:"Cape Verde",code:"CV"},"Cayman Islands":{name:"Cayman Islands",code:"KY"},"Central African Republic":{name:"Central African Republic",code:"CF"},Chad:{name:"Chad",code:"TD"},Chile:{name:"Chile",code:"CL"},China:{name:"China",code:"CN"},"Christmas Island":{name:"Christmas Island",code:"CX"},"Cocos (Keeling) Islands":{name:"Cocos (Keeling) Islands",code:"CC"},Colombia:{name:"Colombia",code:"CO"},Comoros:{name:"Comoros",code:"KM"},Congo:{name:"Congo",code:"CG"},"Congo, the Democratic Republic of the":{name:"Congo, the Democratic Republic of the",code:"CD"},"Cook Islands":{name:"Cook Islands",code:"CK"},"Costa Rica":{name:"Costa Rica",code:"CR"},"C\xf4te d'Ivoire":{name:"C\xf4te d'Ivoire",code:"CI"},Croatia:{name:"Croatia",code:"HR"},Cuba:{name:"Cuba",code:"CU"},"Cura\xe7ao":{name:"Cura\xe7ao",code:"CW"},Cyprus:{name:"Cyprus",code:"CY"},"Czech Republic":{name:"Czech Republic",code:"CZ"},Denmark:{name:"Denmark",code:"DK"},Djibouti:{name:"Djibouti",code:"DJ"},Dominica:{name:"Dominica",code:"DM"},"Dominican Republic":{name:"Dominican Republic",code:"DO"},Ecuador:{name:"Ecuador",code:"EC"},Egypt:{name:"Egypt",code:"EG"},"El Salvador":{name:"El Salvador",code:"SV"},"Equatorial Guinea":{name:"Equatorial Guinea",code:"GQ"},Eritrea:{name:"Eritrea",code:"ER"},Estonia:{name:"Estonia",code:"EE"},Ethiopia:{name:"Ethiopia",code:"ET"},"Falkland Islands (Malvinas)":{name:"Falkland Islands (Malvinas)",code:"FK"},Europe:{name:"Europe",code:"EU"},"Faroe Islands":{name:"Faroe Islands",code:"FO"},Fiji:{name:"Fiji",code:"FJ"},Finland:{name:"Finland",code:"FI"},France:{name:"France",code:"FR"},"French Guiana":{name:"French Guiana",code:"GF"},"French Polynesia":{name:"French Polynesia",code:"PF"},"French Southern Territories":{name:"French Southern Territories",code:"TF"},Gabon:{name:"Gabon",code:"GA"},Gambia:{name:"Gambia",code:"GM"},Georgia:{name:"Georgia",code:"GE"},Germany:{name:"Germany",code:"DE"},Ghana:{name:"Ghana",code:"GH"},Gibraltar:{name:"Gibraltar",code:"GI"},Greece:{name:"Greece",code:"GR"},Greenland:{name:"Greenland",code:"GL"},Grenada:{name:"Grenada",code:"GD"},Guadeloupe:{name:"Guadeloupe",code:"GP"},Guam:{name:"Guam",code:"GU"},Guatemala:{name:"Guatemala",code:"GT"},Guernsey:{name:"Guernsey",code:"GG"},Guinea:{name:"Guinea",code:"GN"},"Guinea-Bissau":{name:"Guinea-Bissau",code:"GW"},Guyana:{name:"Guyana",code:"GY"},Haiti:{name:"Haiti",code:"HT"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",code:"HM"},"Holy See (Vatican City State)":{name:"Holy See (Vatican City State)",code:"VA"},Honduras:{name:"Honduras",code:"HN"},"Hong Kong":{name:"Hong Kong",code:"HK"},Hungary:{name:"Hungary",code:"HU"},Iceland:{name:"Iceland",code:"IS"},India:{name:"India",code:"IN"},Indonesia:{name:"Indonesia",code:"ID"},"Iran, Islamic Republic of":{name:"Iran, Islamic Republic of",code:"IR"},Iraq:{name:"Iraq",code:"IQ"},Ireland:{name:"Ireland",code:"IE"},"Isle of Man":{name:"Isle of Man",code:"IM"},Israel:{name:"Israel",code:"IL"},Italy:{name:"Italy",code:"IT"},Jamaica:{name:"Jamaica",code:"JM"},Japan:{name:"Japan",code:"JP"},Jersey:{name:"Jersey",code:"JE"},Jordan:{name:"Jordan",code:"JO"},Kazakhstan:{name:"Kazakhstan",code:"KZ"},Kenya:{name:"Kenya",code:"KE"},Kiribati:{name:"Kiribati",code:"KI"},"Korea, Democratic People's Republic of":{name:"Korea, Democratic People's Republic of",code:"KP"},"Korea, Republic of":{name:"Korea, Republic of",code:"KR"},Kuwait:{name:"Kuwait",code:"KW"},Kyrgyzstan:{name:"Kyrgyzstan",code:"KG"},"Lao People's Democratic Republic":{name:"Lao People's Democratic Republic",code:"LA"},Latvia:{name:"Latvia",code:"LV"},Lebanon:{name:"Lebanon",code:"LB"},Lesotho:{name:"Lesotho",code:"LS"},Liberia:{name:"Liberia",code:"LR"},Libya:{name:"Libya",code:"LY"},Liechtenstein:{name:"Liechtenstein",code:"LI"},Lithuania:{name:"Lithuania",code:"LT"},Luxembourg:{name:"Luxembourg",code:"LU"},Macao:{name:"Macao",code:"MO"},"Macedonia, the Former Yugoslav Republic of":{name:"Macedonia, the Former Yugoslav Republic of",code:"MK"},Madagascar:{name:"Madagascar",code:"MG"},Malawi:{name:"Malawi",code:"MW"},Malaysia:{name:"Malaysia",code:"MY"},Maldives:{name:"Maldives",code:"MV"},Mali:{name:"Mali",code:"ML"},Malta:{name:"Malta",code:"MT"},"Marshall Islands":{name:"Marshall Islands",code:"MH"},Martinique:{name:"Martinique",code:"MQ"},Mauritania:{name:"Mauritania",code:"MR"},Mauritius:{name:"Mauritius",code:"MU"},Mayotte:{name:"Mayotte",code:"YT"},Mexico:{name:"Mexico",code:"MX"},"Micronesia, Federated States of":{name:"Micronesia, Federated States of",code:"FM"},"Moldova, Republic of":{name:"Moldova, Republic of",code:"MD"},Monaco:{name:"Monaco",code:"MC"},Mongolia:{name:"Mongolia",code:"MN"},Montenegro:{name:"Montenegro",code:"ME"},Montserrat:{name:"Montserrat",code:"MS"},Morocco:{name:"Morocco",code:"MA"},Mozambique:{name:"Mozambique",code:"MZ"},Myanmar:{name:"Myanmar",code:"MM"},Namibia:{name:"Namibia",code:"NA"},Nauru:{name:"Nauru",code:"NR"},Nepal:{name:"Nepal",code:"NP"},Netherlands:{name:"Netherlands",code:"NL"},"New Caledonia":{name:"New Caledonia",code:"NC"},"New Zealand":{name:"New Zealand",code:"NZ"},Nicaragua:{name:"Nicaragua",code:"NI"},Niger:{name:"Niger",code:"NE"},Nigeria:{name:"Nigeria",code:"NG"},Niue:{name:"Niue",code:"NU"},"Norfolk Island":{name:"Norfolk Island",code:"NF"},"Northern Mariana Islands":{name:"Northern Mariana Islands",code:"MP"},Norway:{name:"Norway",code:"NO"},Oman:{name:"Oman",code:"OM"},Pakistan:{name:"Pakistan",code:"PK"},Palau:{name:"Palau",code:"PW"},"Palestine, State of":{name:"Palestine, State of",code:"PS"},Panama:{name:"Panama",code:"PA"},"Papua New Guinea":{name:"Papua New Guinea",code:"PG"},Paraguay:{name:"Paraguay",code:"PY"},Peru:{name:"Peru",code:"PE"},Philippines:{name:"Philippines",code:"PH"},Pitcairn:{name:"Pitcairn",code:"PN"},Poland:{name:"Poland",code:"PL"},Portugal:{name:"Portugal",code:"PT"},"Puerto Rico":{name:"Puerto Rico",code:"PR"},Qatar:{name:"Qatar",code:"QA"},"R\xe9union":{name:"R\xe9union",code:"RE"},Romania:{name:"Romania",code:"RO"},"Russian Federation":{name:"Russian Federation",code:"RU"},Rwanda:{name:"Rwanda",code:"RW"},"Saint Barth\xe9lemy":{name:"Saint Barth\xe9lemy",code:"BL"},"Saint Helena, Ascension and Tristan da Cunha":{name:"Saint Helena, Ascension and Tristan da Cunha",code:"SH"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",code:"KN"},"Saint Lucia":{name:"Saint Lucia",code:"LC"},"Saint Martin (French part)":{name:"Saint Martin (French part)",code:"MF"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",code:"PM"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",code:"VC"},Samoa:{name:"Samoa",code:"WS"},"San Marino":{name:"San Marino",code:"SM"},"Sao Tome and Principe":{name:"Sao Tome and Principe",code:"ST"},"Saudi Arabia":{name:"Saudi Arabia",code:"SA"},Senegal:{name:"Senegal",code:"SN"},Serbia:{name:"Serbia",code:"RS"},Seychelles:{name:"Seychelles",code:"SC"},"Sierra Leone":{name:"Sierra Leone",code:"SL"},Singapore:{name:"Singapore",code:"SG"},"Sint Maarten (Dutch part)":{name:"Sint Maarten (Dutch part)",code:"SX"},Slovakia:{name:"Slovakia",code:"SK"},Slovenia:{name:"Slovenia",code:"SI"},"Solomon Islands":{name:"Solomon Islands",code:"SB"},Somalia:{name:"Somalia",code:"SO"},"South Africa":{name:"South Africa",code:"ZA"},"South Georgia and the South Sandwich Islands":{name:"South Georgia and the South Sandwich Islands",code:"GS"},"South Sudan":{name:"South Sudan",code:"SS"},Spain:{name:"Spain",code:"ES"},"Sri Lanka":{name:"Sri Lanka",code:"LK"},Sudan:{name:"Sudan",code:"SD"},Suriname:{name:"Suriname",code:"SR"},"Svalbard and Jan Mayen":{name:"Svalbard and Jan Mayen",code:"SJ"},Swaziland:{name:"Swaziland",code:"SZ"},Sweden:{name:"Sweden",code:"SE"},Switzerland:{name:"Switzerland",code:"CH"},"Syrian Arab Republic":{name:"Syrian Arab Republic",code:"SY"},"Taiwan, Province of China":{name:"Taiwan, Province of China",code:"TW"},Tajikistan:{name:"Tajikistan",code:"TJ"},"Tanzania, United Republic of":{name:"Tanzania, United Republic of",code:"TZ"},Thailand:{name:"Thailand",code:"TH"},"Timor-Leste":{name:"Timor-Leste",code:"TL"},Togo:{name:"Togo",code:"TG"},Tokelau:{name:"Tokelau",code:"TK"},Tonga:{name:"Tonga",code:"TO"},"Trinidad and Tobago":{name:"Trinidad and Tobago",code:"TT"},Tunisia:{name:"Tunisia",code:"TN"},Turkey:{name:"Turkey",code:"TR"},Turkmenistan:{name:"Turkmenistan",code:"TM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",code:"TC"},Tuvalu:{name:"Tuvalu",code:"TV"},Uganda:{name:"Uganda",code:"UG"},Ukraine:{name:"Ukraine",code:"UA"},"United Arab Emirates":{name:"United Arab Emirates",code:"AE"},"United Kingdom":{name:"United Kingdom",code:"GB"},"United States":{name:"United States",code:"US"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",code:"UM"},Uruguay:{name:"Uruguay",code:"UY"},Uzbekistan:{name:"Uzbekistan",code:"UZ"},Vanuatu:{name:"Vanuatu",code:"VU"},"Venezuela, Bolivarian Republic of":{name:"Venezuela, Bolivarian Republic of",code:"VE"},"Viet Nam":{name:"Viet Nam",code:"VN"},"Virgin Islands, British":{name:"Virgin Islands, British",code:"VG"},"Virgin Islands, U.S.":{name:"Virgin Islands, U.S.",code:"VI"},"Wallis and Futuna":{name:"Wallis and Futuna",code:"WF"},"Western Sahara":{name:"Western Sahara",code:"EH"},Yemen:{name:"Yemen",code:"YE"},Zambia:{name:"Zambia",code:"ZM"},Zimbabwe:{name:"Zimbabwe",code:"ZW"}}},52:function(e,t,n){e.exports=n.p+"static/media/abstract-user-flat-1.1fab100a.svg"},53:function(e,t){e.exports=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","A","AA","AB","AC","AD","AE","AF","AG","AH","AI","AJ","AK","AL","AM","AN","AO","AP","AQ","AR","AS","AT","AU","AV","AW","AX","AY","AZ","B","BA","BB","BC","BD","BE","BF","BG","BH","BI","BJ","BK","BL","BM","BN","BO","BP","BQ","BR","BS","BT","BU","BV","BW","BX","BY","BZ","C","CA","CB","CC","CD","CE","CF","CG","CH","CI","CJ","CK","CL","CM","CN","CO","CP","CQ","CR","CS","CT","CU","CV","CW","CX","CY","CZ","D","DA","DB","DC","DD","DE","DF","DG","DH","DI","DJ","DK","DL","DM","DN","DO","DP","DQ","DR","DS","DT","DU","DV","DW","DX","DY","DZ","E","EA","EB","EC","ED","EE","EF","EG","EH","EI","EJ","EK","EL","EM","EN","EO","EP","EQ","ER","ES","ET","EU","EV","EW","EX","EY","EZ","F","FA","FB","FC","FD","FE","FF","FG","FH","FI","FJ","FK","FL","FM","FN","FO","FP","FQ","FR","FS","FT","FU","FV","FW","FX","FY","FZ","G","GA","GB","GC","GD","GE","GF","GG","GH","GI","GJ","GK","GL","GM","GN","GO","GP","GQ","GR","GS","GT","GU","GV","GW","GX","GY","GZ","H","HA","HB","HC","HD","HE","HF","HG","HH","HI","HJ","HK","HL","HM","HN","HO","HP","HQ","HR","HS","HT","HU","HV","HW","HX","HY","HZ","I","IA","IB","IC","ID","IE","IF","IG","IH","II","IJ","IK","IL","IM","IN","IO","IP","IQ","IR","IS","IT","IU","IV","IW","IX","IY","IZ","J","JA","JB","JC","JD","JE","JF","JG","JH","JI","JJ","JK","JL","JM","JN","JO","JP","JQ","JR","JS","JT","JU","JV","JW","JX","JY","JZ","K","KA","KB","KC","KD","KE","KF","KG","KH","KI","KJ","KK","KL","KM","KN","KO","KP","KQ","KR","KS","KT","KU","KV","KW","KX","KY","KZ","L","LA","LB","LC","LD","LE","LF","LG","LH","LI","LJ","LK","LL","LM","LN","LO","LP","LQ","LR","LS","LT","LU","LV","LW","LX","LY","LZ","M","MA","MB","MC","MD","ME","MF","MG","MH","MI","MJ","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","N","NA","NB","NC","ND","NE","NF","NG","NH","NI","NJ","NK","NL","NM","NN","NO","NP","NQ","NR","NS","NT","NU","NV","NW","NX","NY","NZ","O","OA","OB","OC","OD","OE","OF","OG","OH","OI","OJ","OK","OL","OM","ON","OO","OP","OQ","OR","OS","OT","OU","OV","OW","OX","OY","OZ","P","PA","PB","PC","PD","PE","PF","PG","PH","PI","PJ","PK","PL","PM","PN","PO","PP","PQ","PR","PS","PT","PU","PV","PW","PX","PY","PZ","Q","QA","QB","QC","QD","QE","QF","QG","QH","QI","QJ","QK","QL","QM","QN","QO","QP","QQ","QR","QS","QT","QU","QV","QW","QX","QY","QZ","R","RA","RB","RC","RD","RE","RF","RG","RH","RI","RJ","RK","RL","RM","RN","RO","RP","RQ","RR","RS","RT","RU","RV","RW","RX","RY","RZ","S","SA","SB","SC","SD","SE","SF","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SP","SQ","SR","SS","ST","SU","SV","SW","SX","SY","SZ","T","TA","TB","TC","TD","TE","TF","TG","TH","TI","TJ","TK","TL","TM","TN","TO","TP","TQ","TR","TS","TT","TU","TV","TW","TX","TY","TZ","U","UA","UB","UC","UD","UE","UF","UG","UH","UI","UJ","UK","UL","UM","UN","UO","UP","UQ","UR","US","UT","UU","UV","UW","UX","UY","UZ","V","VA","VB","VC","VD","VE","VF","VG","VH","VI","VJ","VK","VL","VM","VN","VO","VP","VQ","VR","VS","VT","VU","VV","VW","VX","VY","VZ","W","WA","WB","WC","WD","WE","WF","WG","WH","WI","WJ","WK","WL","WM","WN","WO","WP","WQ","WR","WS","WT","WU","WV","WW","WX","WY","WZ","X","XA","XB","XC","XD","XE","XF","XG","XH","XI","XJ","XK","XL","XM","XN","XO","XP","XQ","XR","XS","XT","XU","XV","XW","XX","XY","XZ","Y","YA","YB","YC","YD","YE","YF","YG","YH","YI","YJ","YK","YL","YM","YN","YO","YP","YQ","YR","YS","YT","YU","YV","YW","YX","YY","YZ","Z","ZA","ZB","ZC","ZD","ZE","ZF","ZG","ZH","ZI","ZJ","ZK","ZL","ZM","ZN","ZO","ZP","ZQ","ZR","ZS","ZT","ZU","ZV","ZW","ZX","ZY","ZZ"]},56:function(e,t,n){"use strict";n.r(t),n.d(t,"addResourceImage",(function(){return c})),n.d(t,"editResourceImageInfo",(function(){return l})),n.d(t,"deleteResourceImage",(function(){return u}));var a=n(10),r=n.n(a),o=n(15),s=n(19),i=function(e){switch(e){case"release":return{errors:o.l,receiveOne:o.k};case"personnel":return{errors:s.h,receiveOne:s.g}}},c=function(e,t,n){return function(a){r.a.put("/api/images/add/".concat(e,"/").concat(t),n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){return a(i(e).receiveOne(t.data))})).catch((function(t){return a(i(e).errors(t.response.data))}))}},l=function(e,t,n,a){return function(o){r.a.put("/api/images/edit/".concat(e,"/").concat(t,"/").concat(n),a).then((function(t){return o(i(e).receiveOne(t.data))})).catch((function(t){return o(i(e).errors(t.response.data))}))}},u=function(e,t,n){return function(a){r.a.delete("/api/images/delete/".concat(e,"/").concat(t,"/").concat(n)).then((function(t){return a(i(e).receiveOne(t.data))})).catch((function(t){return a(i(e).errors(t.response.data))}))}}},75:function(e,t){e.exports=["LP","Double LP","Casette","Double Casette","CD","Double CD","MiniDisc","Digital","8-Track"]},79:function(e,t,n){e.exports=n(112)}},[[79,1,2]]]);
//# sourceMappingURL=main.b1138086.chunk.js.map